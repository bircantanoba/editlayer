(function(t){function e(e){for(var a,o,r=e[0],c=e[1],u=e[2],d=0,h=[];d<r.length;d++)o=r[d],i[o]&&h.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(h.length)h.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={1:0},s=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;s.push([65,0]),n()})({"+1F3":function(t,e,n){"use strict";var a=n("BBb1"),i=n.n(a);i.a},"+LxF":function(t,e,n){},"+aIT":function(t,e,n){"use strict";var a=n("mPBz"),i=n.n(a);i.a},"+q1J":function(t,e,n){"use strict";var a=n("IqyZ"),i=n.n(a);i.a},"/MMh":function(t,e,n){"use strict";var a=n("1Hu4"),i=n.n(a);i.a},"/XYo":function(t,e,n){},"/iI1":function(t,e,n){"use strict";var a=n("J5Ym"),i=n.n(a);i.a},"/nJ9":function(t,e,n){"use strict";var a=n("QESl"),i=n.n(a);i.a},"/tC7":function(t,e,n){"use strict";var a=n("yyZs"),i=n.n(a);i.a},"0csI":function(t,e,n){"use strict";var a=n("5yIc"),i=n.n(a);i.a},"0oxd":function(t,e,n){},"1Hu4":function(t,e,n){},"1Uzd":function(t,e,n){"use strict";var a=n("Uq9P"),i=n.n(a);i.a},"2kCX":function(t,e,n){},"32OQ":function(t,e,n){"use strict";var a=n("GN1w"),i=n.n(a);i.a},"3Q5W":function(t,e,n){"use strict";var a=n("/XYo"),i=n.n(a);i.a},"3qPd":function(t,e,n){},"4GQC":function(t,e,n){"use strict";var a=n("QBT8"),i=n.n(a);i.a},"4keQ":function(t,e,n){"use strict";var a=n("D2lX"),i=n.n(a);i.a},"5JC6":function(t,e,n){"use strict";var a=n("nylU"),i=n.n(a);i.a},"5prw":function(t,e,n){},"5yIc":function(t,e,n){},65:function(t,e,n){t.exports=n("Vtdi")},"6dDR":function(t,e,n){},"8At8":function(t,e,n){"use strict";var a=n("2kCX"),i=n.n(a);i.a},"99mF":function(t,e,n){"use strict";n("pIFo"),n("Z2Ku"),n("L9s1");var a=n("LvDl"),i=n.n(a),s=n("vDqi"),o=n.n(s),r=n("J66h"),c=function(t){return console.error(t),console.groupEnd(),!1};e["a"]=function(t){console.group("Webhook started"),console.log("jsonUrl",t.jsonUrl);var e={};if(i.a.includes(t.configString,"{{VERSION_ID}}")&&(t.configString=i.a.replace(t.configString,"{{VERSION_ID}}",t.versionId)),i.a.includes(t.configString,"{{BASE64_CONTENT}}")){var n=r["Base64"].encode(JSON.stringify(t.json));t.configString=i.a.replace(t.configString,"{{BASE64_CONTENT}}",n)}i.a.includes(t.configString,"{{PUBLISHER_EMAIL}}")&&(t.configString=i.a.replace(t.configString,"{{PUBLISHER_EMAIL}}",t.email));try{e=JSON.parse(t.configString)}catch(e){return c("Syntax error: Webhook config is not valid JSON",t.configString)}return i.a.isString(e.url)?"post"!==e.method&&"get"!==e.method?c('"method" is required and it should be "post" or "get"'):"post"===e.method&&i.a.has(e,"params")?c('With a method "post" you should use "data" insted of "params"'):"get"===e.method&&i.a.has(e,"data")?c('With a method "get" you should use "params" insted of "data"'):(console.log("Config:"),console.log(e),o()(e).then(function(t){return console.log("Response:"),console.log(t),console.groupEnd(),!0}).catch(function(t){return c(t)})):c('"url" is required')}},A19A:function(t,e,n){},A8T2:function(t,e,n){},BBb1:function(t,e,n){},BCvz:function(t,e,n){},BEzd:function(t,e,n){},"C+Nb":function(t,e,n){},"D/++":function(t,e,n){},D2lX:function(t,e,n){},EY6Y:function(t,e,n){},FalE:function(t,e,n){"use strict";var a=n("3qPd"),i=n.n(a);i.a},"Fo8/":function(t,e,n){},GN1w:function(t,e,n){},"Gq+F":function(t,e,n){},H4BI:function(t,e,n){},IFy1:function(t,e,n){"use strict";var a=n("Fo8/"),i=n.n(a);i.a},Ic9F:function(t,e,n){},IqSa:function(t,e,n){},IqyZ:function(t,e,n){},Iuqy:function(t,e,n){"use strict";var a=n("iODC"),i=n.n(a);i.a},J5Ym:function(t,e,n){},JJaB:function(t,e,n){},JhKB:function(t,e,n){},JtMT:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"settings"},[n("heading-core",{attrs:{mode:"primary"}},[n("h1",[t._v("Project settings")])]),n("FileLocation",{staticClass:"section"}),n("Users",{staticClass:"section"}),n("Webhook",{staticClass:"section"}),n("DeleteProject",{staticClass:"section"})],1)},i=[],s=(n("pIFo"),n("VRzm"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"file-location"},[n("heading-core",{attrs:{mode:"secondary"}},[n("h2",[t._v("JSON location")]),n("p",[t._v("You can find latest published JSON file from the following URL address")])]),t.isPublished?n("button-core",{staticClass:"json-link",attrs:{href:t.activeProject.jsonUrl,target:t.jsonTarget,light:"",mode:"primary"}},[t._v("\n    "+t._s(t.activeProject.jsonUrl)+"\n  ")]):t._e(),t.isPublished?n("section",{staticClass:"tools"},[n("button-core",{attrs:{light:""},nativeOn:{click:function(e){return t.copyUrl(e)}}},[n("icon",{attrs:{name:"regular/copy"}}),n("span",[t._v("Copy URL")])],1),n("transition",{attrs:{name:"fade--fast"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!0===t.copied,expression:"copied === true"}],staticClass:"copied"},[t._v("\n        Copied to the clipboard\n      ")])])],1):t._e(),t.isPublished?t._e():n("alert-core",{attrs:{mode:"warning"}},[t._v('\n    You haven\'t published content. Click the "Publish" button at the top-left corner.\n  ')])],1)}),o=[],r=n("LvDl"),c=n.n(r),u=n("+QRC"),l=n.n(u),d={name:"FileLocation",data:function(){return{copied:!1}},computed:{activeProject:function(){return this.$store.getters.activeProject},jsonTarget:function(){return"json-".concat(this.activeProject.id)},isPublished:function(){return!c.a.isEmpty(this.activeProject.publishedVersion)}},methods:{copyUrl:function(){l()(this.jsonUrl),this.copied=!0,this.quitCopied()},quitCopied:c.a.debounce(function(){this.copied=!1},4e3)}},h=d,m=(n("Odb/"),n("KHd+")),p=Object(m["a"])(h,s,o,!1,null,"5214a888",null),f=p.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"webhook"},[n("heading-core",{attrs:{mode:"secondary"}},[n("h2",[t._v("Webhook")]),n("p",[t._v("We will send a custom POST/GET request when publishing is done.")])]),!1!==t.enabled?n("alert-core",{attrs:{mode:"info",size:"small"}},[n("div",[t._v("Variable "),n("code",[n("strong",[n("span",[t._v("{{")]),t._v("BASE64_CONTENT"),n("span",[t._v("}}")])])]),t._v(" is published content encoded with "),n("a",{attrs:{href:"https://github.com/dankogai/js-base64",target:"Base64"}},[t._v("Base64")]),t._v(".")]),n("div",[t._v("Variable "),n("code",[n("strong",[n("span",[t._v("{{")]),t._v("VERSION_ID"),n("span",[t._v("}}")])])]),t._v(" is version of published JSON.")]),n("div",[t._v("Variable "),n("code",[n("strong",[n("span",[t._v("{{")]),t._v("PUBLISHER_EMAIL"),n("span",[t._v("}}")])])]),t._v(" is email of publisher.")])]):t._e(),!1!==t.enabled?n("codemirror",{staticClass:"-dracula",attrs:{options:{theme:"dracula",tabSize:2,lineNumbers:!1,mode:"application/ld+json"}},model:{value:t.config,callback:function(e){t.config=e},expression:"config"}}):t._e(),!1!==t.enabled?n("div",{staticClass:"tools"},[n("button-core",{attrs:{size:"small"},nativeOn:{click:function(e){t.switchEnabled()}}},[t._v("Disable webhook")]),n("button-core",{attrs:{size:"small"},nativeOn:{click:function(e){t.testWebhook()}}},[t._v("Test webhook")]),n("transition",{attrs:{name:"fade"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.devtoolInfo,expression:"devtoolInfo"}],staticClass:"debug"},[t._v("Open web console to debug")])]),n("hr"),n("button-core",{attrs:{mode:"info",light:"",href:"https://github.com/axios/axios#axios-api",target:"AxiosDocs"}},[t._v("Axios API")])],1):t._e(),!1===t.enabled?n("div",{},[n("button-core",{nativeOn:{click:function(e){t.switchEnabled()}}},[t._v("Enable webhook")])],1):t._e()],1)},g=[],b=n("adgz"),j=n("wi9O"),_=n("gD9S"),I=n("99mF"),w=n("j5TT"),P=(n("+dQi"),n("p77/"),n("AQno"),{name:"Webhook",components:{Breadcrumb:j["a"],Navigation:_["a"],codemirror:w["codemirror"]},data:function(){return{config:c.a.has(this.$store.getters.activeProject,"settings.webhook.config")?this.$store.getters.activeProject.settings.webhook.config:"",devtoolInfo:!1}},computed:{projectId:function(){return this.$store.getters.activeProject.id},enabled:function(){return!!c.a.has(this.$store.getters.activeProject,"settings.webhook.enabled")&&this.$store.getters.activeProject.settings.webhook.enabled},json:function(){return this.$store.getters.activeProject.publishedVersion.json},versionId:function(){return this.$store.getters.activeProject.publishedVersion.versionId}},watch:{config:c.a.debounce(function(){this.saveConfig()},500)},methods:{saveConfig:function(){if(!this.config)return this.resetConfig(),null;var t={};t["settings.webhook.config"]=this.config,b["a"].firestore.collection("projects").doc(this.projectId).update(t).catch(function(t){return console.error("Webhook config saving failed",t)})},testWebhook:function(){Object(I["a"])({configString:this.config,email:this.$store.getters.auth.email,json:this.json,versionId:this.versionId}),this.devtoolInfo=!0,this.closeDevtoolInfo()},closeDevtoolInfo:c.a.debounce(function(){this.devtoolInfo=!1},1e4),switchEnabled:function(){var t={};t["settings.webhook.enabled"]=!this.enabled,this.config||this.resetConfig(),b["a"].firestore.collection("projects").doc(this.projectId).update(t).catch(function(t){return console.error("Webhook enabling failed",t)})},resetConfig:function(){this.config='{\n  "url": "https://example.com",\n  "method": "get",\n  "params": {\n    "content": "{{BASE64_CONTENT}}",\n    "versionId": "{{VERSION_ID}}"\n  }\n}'}}}),C=P,y=(n("/nJ9"),Object(m["a"])(C,v,g,!1,null,"53c24b29",null)),O=y.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"users"},[n("heading-core",{attrs:{mode:"secondary"}},[n("h2",[t._v("Users")]),n("p",[t._v("You can add permissions to other users.")])]),n("card-core",[n("main",{staticClass:"main"},[n("ul",{staticClass:"users"},t._l(t.activeProject.users,function(e){return n("li",{key:e.id,staticClass:"user"},[n("div",{staticClass:"email",attrs:{title:e.email},domProps:{textContent:t._s(e.email)}}),n("hr"),n("div",{staticClass:"user"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"user.role"}],staticClass:"select",attrs:{disabled:e.id===t.auth.id},on:{change:[function(n){var a=Array.prototype.filter.call(n.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(e,"role",n.target.multiple?a:a[0])},function(n){t.updatePermission(e)}]}},[n("option",{attrs:{value:"admin"}},[t._v("Admin")]),n("option",{attrs:{value:"editor"}},[t._v("Editor")])])]),n("div",{staticClass:"remove"},[n("button-core",{attrs:{light:"",disabled:e.id===t.auth.id},nativeOn:{click:function(n){t.removeUser(e)}}},[n("icon",{attrs:{name:"trash"}})],1)],1)])}))])]),n("NewUserButton")],1)},$=[],E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"new-user"},[n("button-core",{attrs:{size:"small",mode:"success"},nativeOn:{click:function(e){t.openModal()}}},[n("icon",{attrs:{name:"plus"}}),n("span",[t._v("New user")])],1),n("transition",{attrs:{name:"fade--fast"}},["new-user"===t.activeModal?n("NewUserModal"):t._e()],1)],1)},k=[],S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"modal",attrs:{method:"post"},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.closeModal()},submit:function(e){e.preventDefault(),t.newUser()}}},[n("card-core",[n("header",{staticClass:"header"},[n("h1",{staticClass:"heading -feature"},[t._v("New user")])]),n("main",{staticClass:"main"},[n("label",{staticClass:"label"},[n("div",[t._v("Email address")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],ref:"emailAddress",attrs:{type:"text"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),n("alert-core",{attrs:{mode:"info",size:"small"}},[t._v("\n        You can add new user even before that user is registered. When user register with the same email address user gets permissions to this project. The invitation will not be sent automatically.\n      ")])],1),n("footer",{staticClass:"footer"},[n("hr"),n("button-core",{attrs:{type:"button",light:""},nativeOn:{click:function(e){t.closeModal()}}},[t._v("Cancel")]),n("button-core",{attrs:{type:"submit",mode:"success"}},[t._v("Add new user")])],1)])],1)},N=[],D=(n("f3/d"),n("+QwO")),T=n.n(D),M={name:"NewUserModal",data:function(){return{email:""}},computed:{activeProject:function(){return this.$store.getters.activeProject}},methods:{newProject:function(){null!==this.name&&""!==this.name&&(this.$store.dispatch("newProject",{name:this.name}),this.closeModal())},newUser:function(){if(!T.a.isEmail(this.email))return console.error("Email is invalid",this.email),this.$store.commit("setNotification",{mode:"danger",message:"Email ".concat(this.email," is invalid")}),!1;this.$store.dispatch("addUserToProject",{email:this.email,projectId:this.activeProject.id}),this.closeModal()},closeModal:function(){this.$store.commit("setActiveModal",null)}},mounted:function(){this.$refs.emailAddress.focus()}},A=M,R=(n("Yy1M"),Object(m["a"])(A,S,N,!1,null,"958291a8",null)),B=R.exports,L={name:"NewUserButton",components:{NewUserModal:B},data:function(){return{name:""}},computed:{activeModal:function(){return this.$store.state.utils.activeModal}},methods:{openModal:function(){this.$store.commit("setActiveModal","new-user")}}},F=L,U=(n("FalE"),Object(m["a"])(F,E,k,!1,null,"035341e2",null)),V=U.exports,z={name:"Users",components:{NewUserButton:V},computed:{activeProject:function(){return this.$store.getters.activeProject},auth:function(){return this.$store.getters.auth}},methods:{updatePermission:function(t){var e={};"admin"===t.role?e={publish:!0,updateDraft:!0,updateSchema:!0,updateSettings:!0,updateUsers:!0,createJob:!0}:"editor"===t.role&&(e={publish:!0,updateDraft:!0,updateSchema:!1,updateSettings:!1,updateUsers:!1,createJob:!1}),this.$store.dispatch("updatePermission",{userId:t.id,projectId:this.activeProject.id,permissions:e})},removeUser:function(t){var e=confirm('You want to remove "'.concat(t.email,'". Are you sure?'));!0===e&&this.$store.dispatch("removeUserFromProject",{userId:t.id,projectId:this.activeProject.id})}}},W=z,q=(n("vwjB"),Object(m["a"])(W,x,$,!1,null,"b5cdb26a",null)),Y=q.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"delete-project"},[n("heading-core",{attrs:{mode:"secondary"}},[n("h2",[t._v("Delete project")]),n("p",[t._v("Your project will be deleted permanently and you can’t undo this.")])]),n("button-core",{attrs:{mode:"danger",size:"small",light:""},nativeOn:{click:function(e){t.deleteProject()}}},[t._v("\n    Delete Project Permamently\n  ")])],1)},K=[],J={name:"DeleteProject",computed:{activeProject:function(){return this.$store.getters.activeProject}},methods:{deleteProject:function(){var t=prompt('Write "'.concat(this.activeProject.id,'" if you really want to delete project permanently.'),"");return null===t?null:t!==this.activeProject.id?(console.error("Project Id is invalid",t),null):(this.$store.dispatch("deleteProject",{id:this.activeProject.id}),this.$store.commit("setNotification",{mode:"info",message:'Deleting project "'.concat(this.activeProject.id,'", please wait...')}),void this.$router.push({name:"Dashboard"}))}}},Q=J,G=(n("m3uY"),Object(m["a"])(Q,H,K,!1,null,"11ea3edf",null)),X=G.exports,Z={name:"Settings",components:{FileLocation:f,Webhook:O,Users:Y,DeleteProject:X},computed:{activeProject:function(){return this.$store.getters.activeProject}},created:function(){!0!==this.activeProject.auth.permissions.updateSettings&&this.$router.replace({name:"Content",params:{projectId:this.activeProject.id}})}},tt=Z,et=(n("dWsO"),Object(m["a"])(tt,a,i,!1,null,"4ae6f54c",null));e["a"]=et.exports},K54P:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"schema"},[n("heading-core",{attrs:{mode:"primary"}},[n("h1",[t._v("Schema")])]),n("SchemaEditor")],1)},i=[],s=(n("pIFo"),n("VRzm"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"schema-editor",class:{"-error":t.syntaxError}},[n("section",{staticClass:"editor"},[n("transition",{attrs:{name:"fade"}},[t.syntaxError?n("div",{staticClass:"error-message"},[t._v("Invalid JSON Syntax")]):t._e()]),n("codemirror",{staticClass:"-dracula",attrs:{options:{theme:"dracula",tabSize:2,lineNumbers:!0,mode:"application/ld+json"}},model:{value:t.schema,callback:function(e){t.schema=e},expression:"schema"}})],1),n("alert-core",{attrs:{mode:"info",size:"small"}},[n("strong",[t._v("Supported editors: ")]),n("i",[t._v(t._s(t.editors.join(", ")))])])],1)}),o=[],r=n("LvDl"),c=n.n(r),u=n("PY3e"),l=n("j5TT"),d=(n("+dQi"),n("p77/"),n("AQno"),n("A8T2"),{name:"SchemaEditor",components:{codemirror:l["codemirror"]},data:function(){return{schema:"",syntaxError:!1}},computed:{activeProject:function(){return this.$store.getters.activeProject},editors:function(){var t=[];return c.a.each(u["a"],function(e){t.push(e.schemaName)}),t}},watch:{schema:c.a.debounce(function(){this.saveSchema()},500)},methods:{saveSchema:function(){this.syntaxError=!1;try{JSON.parse(this.schema),this.$store.commit("removeInvalidSchema",this.activeProject.id)}catch(t){return console.warn("Syntax Error"),this.$store.commit("setInvalidSchema",{projectId:this.activeProject.id,schema:this.schema}),this.syntaxError=!0,!1}this.schema!==this.activeProject.schema&&this.$store.dispatch("updateSchema",{projectId:this.activeProject.id,schema:this.schema})},setSchema:function(){c.a.has(this.$store.state.utils.invalidSchemas,this.activeProject.id)?this.schema=this.$store.state.utils.invalidSchemas[this.activeProject.id]:this.schema=this.activeProject.schema}},created:function(){this.setSchema()}}),h=d,m=(n("0csI"),n("KHd+")),p=Object(m["a"])(h,s,o,!1,null,"0c7361ec",null),f=p.exports,v={name:"Schema",components:{SchemaEditor:f},computed:{activeProject:function(){return this.$store.getters.activeProject}},created:function(){!0!==this.activeProject.auth.permissions.updateSchema&&this.$router.replace({name:"Content",params:{projectId:this.activeProject.id}})}},g=v,b=(n("wYF4"),Object(m["a"])(g,a,i,!1,null,"4bf2ccbf",null));e["a"]=b.exports},K5vO:function(t,e,n){},KPT4:function(t,e,n){},Kf8i:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"content"},["item"!==t.activeItem._type?n("div",{staticClass:"no-content"},[n("icon",{staticClass:"icon",attrs:{name:"kiwi-bird"}})],1):t._e(),"item"===t.activeItem._type?n("Editor"):t._e()],1)},i=[],s=(n("VRzm"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor"},[n("heading-core",{attrs:{mode:"primary"}},[n("h1",[t._v(t._s(t.activeItem.TITLE))])]),t.activeItem.INFO?n("alert-core",{attrs:{mode:"info"}},[t._v("\n    "+t._s(t.activeItem.INFO)+"\n  ")]):t._e(),t.isSupported&&!t.forceEditorReload?n(t.activeComponentName,{tag:"component"}):t._e(),!t.isSupported&&t.activeItem.EDITOR?n("alert-core",{attrs:{mode:"warning"}},[t._v('\n    Editor "'),n("strong",[t._v(t._s(t.activeItem.EDITOR))]),t._v('" is not supported, please change editor in the schema. Following editors are supported: '),n("i",[t._v(t._s(t.editors.join(", ")))])]):t._e(),t.editorContentIsValid?t._e():n("div",{staticClass:"error"},[n("div",{staticClass:"message"},[t._v("Invalid Content")])]),n("footer",{staticClass:"close-button"},[n("button-core",{nativeOn:{click:function(e){t.closeEditor()}}},[t._v("Close")])],1)],1)}),o=[],r=(n("KKXr"),n("Z2Ku"),n("L9s1"),n("dRSK"),n("f3/d"),n("LvDl")),c=n.n(r),u=n("PY3e"),l={},d=[];c.a.each(u["a"],function(t){l[t.editor.name]=t.editor,d.push(t.schemaName)});var h={name:"Editor",data:function(){return{editors:d,forceEditorReload:!1}},components:l,computed:{activeItem:function(){return this.$store.getters.activeItem},activeComponentName:function(){var t=c.a.find(u["a"],{schemaName:this.activeItem.EDITOR});return t.editor.name},isSupported:function(){return c.a.includes(this.editors,this.activeItem.EDITOR)},editorContentIsValid:function(){return this.$store.state.utils.editorContentIsValid}},watch:{"activeItem._path":function(t){var e=this;this.forceEditorReload=!0,this.$nextTick(function(){e.forceEditorReload=!1})}},methods:{closeEditor:function(){var t=c.a.chain(this.$route.params.path).split(">").dropRight().value();while(t.length>0){var e=c.a.join(t,"."),n=c.a.get(this.schema,e);if(n&&!c.a.has(n,"_order"))return this.$router.push({name:"Content",params:{projectId:this.$store.getters.activeProject.id,path:n._path}}),!1;t=c.a.dropRight(t)}this.$router.push({name:"Content",params:{projectId:this.$store.getters.activeProject.id}})}}},m=h,p=(n("4GQC"),n("KHd+")),f=Object(p["a"])(m,s,o,!1,null,"0fb427bb",null),v=f.exports,g={name:"Content",components:{Editor:v},computed:{activeItem:function(){return this.$store.getters.activeItem}}},b=g,j=(n("f4Vg"),Object(p["a"])(b,a,i,!1,null,"27952abc",null));e["a"]=j.exports},KgAG:function(t,e,n){"use strict";var a=n("EY6Y"),i=n.n(a);i.a},LRkO:function(t,e,n){},MG6h:function(t,e,n){"use strict";var a=n("rEkR"),i=n.n(a);i.a},MKXb:function(t,e,n){"use strict";var a=n("A19A"),i=n.n(a);i.a},"Ma+q":function(t,e,n){"use strict";var a=n("wHRk"),i=n.n(a);i.a},Mgjs:function(t,e,n){},NaSU:function(t,e,n){"use strict";var a=n("C+Nb"),i=n.n(a);i.a},"Odb/":function(t,e,n){"use strict";var a=n("tsck"),i=n.n(a);i.a},PVfK:function(t,e,n){},PY3e:function(t,e,n){"use strict";var a,i,s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor -calendar"},[t.pickerMode?n("v-date-picker",{attrs:{mode:t.pickerMode,"is-inline":""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}):t._e(),n("section",{staticClass:"tools"},[t.showTime?n("div",{staticClass:"time"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.hour,expression:"hour"}],staticClass:"select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.hour=e.target.multiple?n:n[0]}}},t._l(t.hourOptions,function(e,a){return n("option",{key:a,domProps:{value:e.value,textContent:t._s(e.label)}})})),n("span",[t._v(":")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.minute,expression:"minute"}],staticClass:"select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.minute=e.target.multiple?n:n[0]}}},t._l(t.minuteOptions,function(e,a){return n("option",{key:a,domProps:{value:e.value,textContent:t._s(e.label)}})})),t.showSecond?n("span",[t._v(":")]):t._e(),t.showSecond?n("select",{directives:[{name:"model",rawName:"v-model",value:t.second,expression:"second"}],staticClass:"select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.second=e.target.multiple?n:n[0]}}},t._l(t.secondOptions,function(e,a){return n("option",{key:a,domProps:{value:e.value,textContent:t._s(e.label)}})})):t._e()]):t._e(),n("hr"),t.showNow?n("button-core",{attrs:{light:""},nativeOn:{click:function(e){return t.selectNow(e)}}},[t._v("Now")]):t._e()],1)],1)},o=[],r=(n("Z2Ku"),n("L9s1"),n("Oyvg"),n("9VmF"),n("LvDl")),c=n.n(r),u={data:function(){return{content:this.$store.getters.activeItem._content}},computed:{config:function(){if(!c.a.has(this.$store,"getters.activeItem"))return{};var t={};return c.a.each(this.$store.getters.activeItem,function(e,n){c.a.startsWith(n,"_")||(t[n]=e)}),t},isPatternValid:function(){if(!this.config.PATTERN)return!0;var t=new RegExp(this.config.PATTERN,this.config.FLAGS);return t.test(this.content)},isRequiredValid:function(){return!0!==this.config.REQUIRED||!0===this.content||!c.a.isEmpty(this.content)},isValid:function(){return this.isPatternValid&&this.isRequiredValid&&!0!==this.preventSave}},watch:{content:function(t,e){if(!1===this.isValid)return this.$store.commit("setEditorContentValid",!1),null;this.$store.commit("setEditorContentValid",!0),this.updateContent(t)}},methods:{updateContent:c.a.throttle(function(t){this.$store.dispatch("updateContent",{projectId:this.$route.params.projectId,path:this.$store.getters.activeItem._path,content:t})},500)},mounted:function(){this.$store.commit("setEditorContentValid",!0)}},l=u,d=n("KHd+"),h=Object(d["a"])(l,a,i,!1,null,null,null),m=h.exports,p=n("Wgwc"),f=n.n(p),v=n("2iik");n("RBhM");Object(v["setupCalendar"])({firstDayOfWeek:2});var g,b,j={extends:m,name:"DateTimeEditor",components:{"v-date-picker":v["DatePicker"]},data:function(){return{date:null,hour:null,minute:null,second:null}},watch:{date:function(){this.setContent()},hour:function(){this.setContent()},minute:function(){this.setContent()},second:function(){this.setContent()}},computed:{hourOptions:function(){return this.timeOptions(this.config.HOUR,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])},minuteOptions:function(){return this.timeOptions(this.config.MINUTE,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59])},secondOptions:function(){return this.timeOptions(this.config.SECOND,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59])},pickerMode:function(){return c.a.includes(["date","date-time"],this.config.MODE)||!this.config.MODE?"single":"date-range"===this.config.MODE?"range":"date-multiple"===this.config.MODE&&"multiple"},showTime:function(){return c.a.includes(["time","date-time"],this.config.MODE)||!this.config.MODE},showSecond:function(){return c.a.has(this.config,"SECOND")&&!1!==this.config.SECOND},showNow:function(){return c.a.includes(["date","time","date-time"],this.config.MODE)||!this.config.MODE}},methods:{timeOptions:function(t,e){var n=[];return t=c.a.isObject(t)?t:e,c.a.each(t,function(t){if(c.a.has(t,"value")){var e=t.label||t.value;n.push({value:"0".concat(t.value).slice(-2),label:e})}else n.push({value:"0".concat(t).slice(-2),label:"0".concat(t).slice(-2)})}),n},closestValue:function(t,e){var n=null,a=null;return c.a.each(t,function(t){var i=Math.abs(t.value-e);(n>i||null===n||null===a)&&(n=i,a=t.value)}),a},initSingle:function(){f()(this.content).isValid()&&"time"!==this.config.MODE&&1970===f()(this.content).year()&&0===f()(this.content).month()&&1===f()(this.content).date()?this.date=f()().toDate():f()(this.content).isValid()?this.date=f()(this.content).toDate():this.date=f()().toDate(),this.showTime?(this.hour=this.closestValue(this.hourOptions,f()(this.date).hour()),this.minute=this.closestValue(this.minuteOptions,f()(this.date).minute())):(this.hour="00",this.minute="00"),this.showTime&&this.showSecond?this.second=this.closestValue(this.secondOptions,f()(this.date).second()):this.second="00"},initMultiple:function(){var t=c.a.isArray(this.content)?this.content:null,e=[];c.a.each(t,function(t){e.push(f()(t).toDate())}),this.date=e},initRange:function(){this.date={start:f()(this.content.start).toDate(),end:f()(this.content.end).toDate()}},setContent:function(){if("date-multiple"===this.config.MODE){var t=[];c.a.each(this.date,function(e){t.push(f()(e).toISOString())}),this.content=t}else"date-range"===this.config.MODE?this.content={start:f()(this.date.start).toISOString(),end:f()(this.date.end).toISOString()}:"time"===this.config.MODE?this.content=f()(this.date).set("year",1970).set("month",0).set("date",1).set("hour",this.hour).set("minute",this.minute).set("second",this.second).toISOString():this.content=f()(this.date).set("hour",this.hour).set("minute",this.minute).set("second",this.second).toISOString()},selectNow:function(){this.date=f()().toDate(),this.hour=this.closestValue(this.hourOptions,f()(this.date).hour()),this.minute=this.closestValue(this.minuteOptions,f()(this.date).minute()),this.second=this.closestValue(this.secondOptions,f()(this.date).second())}},created:function(){"date-multiple"===this.config.MODE?this.initMultiple():"date-range"===this.config.MODE?this.initRange():this.initSingle()}},_=j,I=(n("VPUQ"),Object(d["a"])(_,s,o,!1,null,"b945cbd0",null)),w=I.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor -checkbox"},[t.options?t._e():n("alert-core",{attrs:{mode:"warning"}},[t._v('\n    OPTIONS is required with "checkbox" editor. Fix your schema.\n  ')]),t._l(t.options,function(e,a){return n("label",{key:a,staticClass:"checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"input",attrs:{type:"checkbox"},domProps:{value:e.value,checked:Array.isArray(t.content)?t._i(t.content,e.value)>-1:t.content},on:{change:function(n){var a=t.content,i=n.target,s=!!i.checked;if(Array.isArray(a)){var o=e.value,r=t._i(a,o);i.checked?r<0&&(t.content=a.concat([o])):r>-1&&(t.content=a.slice(0,r).concat(a.slice(r+1)))}else t.content=s}}}),n("span",{domProps:{textContent:t._s(t.label(e))}})])})],2)},C=[],y=(n("dRSK"),{extends:m,name:"CheckboxEditor",computed:{options:function(){return!!c.a.isObject(this.config.OPTIONS)&&this.config.OPTIONS}},methods:{label:function(t){return t.label||t.value},removeNonExitingValues:function(){var t=this,e=[];c.a.each(this.content,function(n){c.a.find(t.options,{value:n})&&e.push(n)}),this.content=e}},mounted:function(){c.a.isArray(this.content)||(this.content=[]),this.removeNonExitingValues()}}),O=y,x=(n("+aIT"),Object(d["a"])(O,P,C,!1,null,"2547a422",null)),$=x.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor -textarea"},[n("codemirror",{staticClass:"-dracula",attrs:{options:t.options},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)},k=[],S=n("j5TT"),N=(n("p77/"),n("AQno"),n("+dQi"),n("1eCo"),n("ewDg"),n("G2Pi"),n("lZu9"),{extends:m,name:"CodeEditor",components:{codemirror:S["codemirror"]},data:function(){return{options:{theme:"dracula",tabSize:2,lineNumbers:!0,mode:null}}},created:function(){switch(this.config.MODE){case"css":this.options.mode="text/css";break;case"scss":this.options.mode="text/x-scss";break;case"sass":this.options.mode="text/x-sass";break;case"less":this.options.mode="text/x-less";break;case"json":this.options.mode="application/ld+json";break;case"javascript":this.options.mode="application/javascript";break;case"typescript":this.options.mode="application/typescript";break;case"markdown":this.options.mode="text/x-markdown";break;default:this.options.mode="xml",this.options.htmlMode=!0}}}),D=N,T=(n("KgAG"),Object(d["a"])(D,E,k,!1,null,"ca3066d4",null)),M=T.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor -color"},[n("div",{staticClass:"tools"},[n("div",{ref:"colorPicker",staticClass:"picker"})]),n("div",{staticClass:"info"},[n("div",{staticClass:"preview",style:{backgroundColor:t.color},on:{click:function(e){t.$refs.colorInput.click()}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.color,expression:"color"}],attrs:{type:"text"},domProps:{value:t.color},on:{input:function(e){e.target.composing||(t.color=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.color,expression:"color"},{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"colorInput",attrs:{type:"color"},domProps:{value:t.color},on:{input:function(e){e.target.composing||(t.color=e.target.value)}}})])])},R=[],B=n("Gzi+"),L=n.n(B),F={extends:m,name:"ColorEditor",data:function(){return{color:null,colorPicker:null,license:"partner"}},watch:{color:function(){this.saveColor(),this.colorPicker.color.hexString=this.color}},methods:{initPicker:function(){var t=this,e=200;this.colorPicker=new L.a.ColorPicker(this.$refs.colorPicker,{width:e,height:1.15*e,color:this.color,sliderMargin:.05*e,sliderHeight:.1*e,padding:0,anticlockwise:!0}),this.colorPicker.on("color:change",function(e){t.color=e.hexString})},saveColor:c.a.debounce(function(){this.content=this.color},500)},mounted:function(){this.initPicker(),null!==this.content?this.color=this.content:this.color="#dddddd"}},U=F,V=(n("MG6h"),Object(d["a"])(U,A,R,!1,null,"5f91df0f",null)),z=V.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor -image"},[n("div",{staticClass:"preview"},[!1!==t.previewImage?n("img",{staticClass:"image",attrs:{src:t.previewImage,alt:""}}):t._e()]),n("div",{staticClass:"tools"},[n("button-core",{attrs:{size:"large",mode:"primary",disabled:t.uploading},nativeOn:{click:function(e){t.$refs["file-input"].click()}}},[t._v("\n      Upload Image\n    ")])],1),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file-input",staticClass:"file-input",attrs:{type:"file",accept:"image/png, image/jpeg, image/gif, image/svg+xml"},on:{change:function(e){t.uploadImage(e)}}})])},q=[],Y=(n("pIFo"),n("KKXr"),{extends:m,name:"ImageEditor",data:function(){return{uploading:!1}},watch:{"$store.getters.activeItem._content":function(t){this.content=t}},computed:{projectId:function(){return this.$route.params.projectId},filename:function(){return c.a.chain(this.content).split("/").pop().value()},previewImage:function(){return c.a.get(this.content,"url")}},methods:{uploadImage:function(t){var e=this,n=t.target.files[0];if(this.$refs["file-input"].value="",!n)return!1;this.uploading=!0,this.$store.dispatch("uploadImage",{projectId:this.projectId,path:c.a.replace(this.$route.params.path,/>/g,"."),image:n,downscale:this.config.DOWNSCALE,placeholder:this.config.PLACEHOLDER}).then(function(t){e.uploading=!1})}}}),H=Y,K=(n("ROHU"),Object(d["a"])(H,W,q,!1,null,"580aea5d",null)),J=K.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor -input"},["checkbox"===t.inputType?n("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"input",staticClass:"input",attrs:{placeholder:t.config.PLACEHOLDER,min:t.config.MIN,max:t.config.MAX,minlength:t.config.MINLENGTH,maxlength:t.config.MAXLENGTH,step:t.config.STEP,multiple:t.config.MULTIPLE,list:t.datalistId,type:"checkbox"},domProps:{checked:Array.isArray(t.content)?t._i(t.content,null)>-1:t.content},on:{change:function(e){var n=t.content,a=e.target,i=!!a.checked;if(Array.isArray(n)){var s=null,o=t._i(n,s);a.checked?o<0&&(t.content=n.concat([s])):o>-1&&(t.content=n.slice(0,o).concat(n.slice(o+1)))}else t.content=i}}}):"radio"===t.inputType?n("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"input",staticClass:"input",attrs:{placeholder:t.config.PLACEHOLDER,min:t.config.MIN,max:t.config.MAX,minlength:t.config.MINLENGTH,maxlength:t.config.MAXLENGTH,step:t.config.STEP,multiple:t.config.MULTIPLE,list:t.datalistId,type:"radio"},domProps:{checked:t._q(t.content,null)},on:{change:function(e){t.content=null}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"input",staticClass:"input",attrs:{placeholder:t.config.PLACEHOLDER,min:t.config.MIN,max:t.config.MAX,minlength:t.config.MINLENGTH,maxlength:t.config.MAXLENGTH,step:t.config.STEP,multiple:t.config.MULTIPLE,list:t.datalistId,type:t.inputType},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),t.isDatalist?n("datalist",{attrs:{id:t.datalistId}},t._l(t.config.DATALIST,function(t,e){return n("option",{key:e,domProps:{value:t}})})):t._e()])},G=[],X={extends:m,name:"InputEditor",computed:{preventSave:function(){return!(!this.content||!1!==c.a.get(this.$refs,"input.validity.valid"))},inputType:function(){return["email","number","password","tel","url"].includes(this.config.MODE)?this.config.MODE:"text"},isDatalist:function(){return c.a.isArray(this.config.DATALIST)},datalistId:function(){return!!this.isDatalist&&"datalist"}},mounted:function(){this.$refs["input"].focus()}},Z=X,tt=(n("rsj+"),Object(d["a"])(Z,Q,G,!1,null,"81a5c2a4",null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor -markdown"},[n("codemirror",{ref:"codemirror",class:{"-focus":t.focus},attrs:{options:t.options},on:{focus:function(e){t.focus=!0},blur:function(e){t.focus=!1},cursorActivity:function(e){t.moveAddButton()}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),null!==t.addButton.top&&!1!==t.config.IMAGE?n("button-core",{ref:"addButton",staticClass:"add-button",style:{top:t.addButton.top},attrs:{circle:"",size:"small"},nativeOn:{click:function(e){t.$refs.fileInput.click()}}},[n("icon",{attrs:{name:"plus"}})],1):t._e(),n("div",{staticClass:"tools"},[n("button-core",{attrs:{mode:"info",light:"",href:"https://www.markdownguide.org/cheat-sheet",target:"markdown-cheat-sheet"}},[t._v("Markdown Cheat Sheet")])],1),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInput",staticClass:"file-input",attrs:{type:"file",accept:"image/png, image/jpeg, image/gif, image/svg+xml"},on:{change:function(e){t.uploadImage(e)}}})],1)},at=[],it=n("zYwU"),st=n.n(it),ot={extends:m,name:"MarkdownEditor",components:{codemirror:S["codemirror"]},data:function(){return{addButton:{top:null,line:null},options:{tabSize:2,lineNumbers:!1,lineWrapping:!0,autofocus:!0,mode:"text/x-markdown"},focus:!1}},computed:{projectId:function(){return this.$route.params.projectId},codemirror:function(){return this.$refs.codemirror.codemirror},uploadProcess:function(){return c.a.has(this.$store.state.uploadProcesses,"".concat(this.projectId,">").concat(this.$route.params.path))?c.a.get(this.$store.state.uploadProcesses,"".concat(this.projectId,">").concat(this.$route.params.path)):null}},methods:{uploadImage:function(t){var e=this,n=t.target.files[0];if(this.$refs.fileInput.value="",!n)return!1;this.$store.dispatch("uploadImage",{projectId:this.projectId,path:this.$route.params.path,image:n,downscale:this.config.DOWNSCALE}).then(function(t){var n=e.codemirror.doc,a=st()(t.filename),i="![".concat(a,"](").concat(t.downloadURL,")");n.replaceRange(i,n.getCursor())}).catch(function(t){return console.error("Image uploading faild!",t)})},moveAddButton:function(){var t=this;this.$nextTick(function(){var e=t.codemirror.doc,n=e.getCursor(),a=e.lineInfo(n.line);if(""!==a.text)return t.addButton.top=null,t.addButton.line=null,null;var i=t.codemirror.cursorCoords(),s=t.$refs.codemirror.$el.getBoundingClientRect();t.addButton.line=n.line,t.addButton.top=i.top-s.top+"px"})}},mounted:function(){this.moveAddButton()}},rt=ot,ct=(n("yF+Q"),Object(d["a"])(rt,nt,at,!1,null,"781d655c",null)),ut=ct.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor -radio"},[t.options?t._e():n("alert-core",{attrs:{mode:"warning"}},[t._v('\n    OPTIONS is required with "radio" editor. Fix your schema.\n  ')]),t._l(t.options,function(e,a){return n("label",{key:a,staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"input",attrs:{type:"radio"},domProps:{value:e.value,checked:t._q(t.content,e.value)},on:{change:function(n){t.content=e.value}}}),n("span",{domProps:{textContent:t._s(t.label(e))}})])})],2)},dt=[],ht={extends:m,name:"RadioEditor",computed:{options:function(){return!!c.a.isObject(this.config.OPTIONS)&&this.config.OPTIONS}},methods:{label:function(t){return t.label?t.label:t.value}}},mt=ht,pt=(n("WRfe"),Object(d["a"])(mt,lt,dt,!1,null,"6a423bac",null)),ft=pt.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor -rich-text"},[n("quill-editor",{ref:"quillEditor",attrs:{options:t.options},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),null!==t.addButton.top&&!1!==t.config.IMAGE?n("button-core",{ref:"addButton",staticClass:"add-button",style:{top:t.addButton.top},attrs:{circle:"",size:"small"},nativeOn:{click:function(e){t.$refs["fileInput"].click()}}},[n("icon",{attrs:{name:"plus"}})],1):t._e(),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInput",staticClass:"file-input",attrs:{type:"file",accept:"image/png, image/jpeg, image/gif, image/svg+xml"},on:{change:function(e){t.uploadImage(e)}}})],1)},gt=[],bt=n("lT11"),jt=n("1R/T"),_t=(n("p1OT"),n("gJae"),n("FOEY"),{extends:m,name:"RichTextEditor",components:{quillEditor:bt["quillEditor"]},data:function(){return{addButton:{top:null,index:null}}},computed:{quill:function(){return this.$refs.quillEditor.quill},options:function(){var t=this;return{theme:"bubble",bounds:".main-panel",placeholder:c.a.has(this.config,"PLACEHOLDER")?this.config.PLACEHOLDER:"",modules:{toolbar:{container:[[{header:1},{header:2},"bold","italic"],["link","blockquote"],[{list:"ordered"},{list:"bullet"}],["clean"]],handlers:{image:function(){t.$refs["file-input"].click()}}}}}}},methods:{uploadImage:function(t){var e=this,n=t.target.files[0];if(this.$refs["fileInput"].value="",!n)return null;this.$store.dispatch("uploadImage",{projectId:this.projectId,path:this.$route.params.path,image:n,downscale:this.config.DOWNSCALE}).then(function(t){e.quill.insertEmbed(e.addButton.index,"image",t.downloadURL)}).catch(function(t){return console.error("Image uploading faild!",t)})},moveAddButton:function(){var t=this;this.$nextTick(function(){var e=window.getSelection().baseNode,n=t.quill.getSelection(),a=document.querySelector(".ql-editor"),i=0===c.a.get(n,"length"),s=void 0===e.data,o=1===c.a.get(e,"childNodes.length"),r="BR"===c.a.get(e,"childNodes[0].tagName");if(!i||!s||!o||!r)return t.addButton.top=null,t.addButton.index=null,null;var u=Object(jt["a"])(a),l=a.getBoundingClientRect();t.addButton.index=n.index,t.addButton.top=u.top-l.top+"px"})}},mounted:function(){var t=this;this.quill.focus(),this.moveAddButton(),this.quill.on("editor-change",function(){return t.moveAddButton()}),window.addEventListener("resize",function(){return t.moveAddButton()})}}),It=_t,wt=(n("XqGs"),Object(d["a"])(It,vt,gt,!1,null,"582ee774",null)),Pt=wt.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor -select"},[t.options?t._e():n("alert-core",{attrs:{mode:"warning"}},[t._v('\n    OPTIONS is required with "select" editor. Fix your schema.\n  ')]),t.options?n("select",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.content=e.target.multiple?n:n[0]}}},t._l(t.options,function(e,a){return n("option",{key:a,domProps:{value:e.value,textContent:t._s(t.label(e))}})})):t._e()],1)},yt=[],Ot={extends:m,name:"SelectEditor",computed:{options:function(){return!!c.a.isObject(this.config.OPTIONS)&&this.config.OPTIONS}},methods:{label:function(t){return t.label?t.label:t.value}}},xt=Ot,$t=(n("VnyG"),Object(d["a"])(xt,Ct,yt,!1,null,"52d87a86",null)),Et=$t.exports,kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor -select-image"},[t.options?t._e():n("alert-core",{attrs:{mode:"warning"}},[t._v('\n    OPTIONS is required with "select-image" editor. Fix your schema.\n  ')]),t.options?n("section",{staticClass:"images"},t._l(t.options,function(e,a){return n("div",{key:a,staticClass:"option"},[n("img",{staticClass:"image",class:{"-active":e.value===t.content},attrs:{src:e.url,alt:e.value},on:{click:function(n){t.selectImage(e.value)}}})])})):t._e()],1)},St=[],Nt={extends:m,name:"SelectImageEditor",computed:{options:function(){return!!c.a.isObject(this.config.OPTIONS)&&this.config.OPTIONS}},methods:{selectImage:function(t){this.content=t}}},Dt=Nt,Tt=(n("UXnw"),Object(d["a"])(Dt,kt,St,!1,null,"039f05af",null)),Mt=Tt.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor -textarea"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"textarea",staticClass:"textarea",attrs:{placeholder:t.config.PLACEHOLDER},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])},Rt=[],Bt=n("GemG"),Lt=n.n(Bt),Ft={extends:m,name:"TextareaEditor",mounted:function(){this.$refs["textarea"].focus(),Lt()(this.$refs["textarea"])}},Ut=Ft,Vt=(n("kGHF"),Object(d["a"])(Ut,At,Rt,!1,null,"34c432d5",null)),zt=Vt.exports,Wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("PartnerInfo")},qt=[],Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"partner-info"},[n("alert-core",{attrs:{mode:"warning"}},[t._v("\n    This editor is available only for official partners of Editlayer.\n  ")]),n("button-core",{attrs:{href:t.partnersUrl,target:"editlayer",mode:"primary"}},[t._v("\n    Become a partner\n  ")])],1)},Ht=[],Kt=(n("VRzm"),{name:"PartnerInfo",computed:{partnersUrl:function(){return"".concat(this.$store.state.utils.editlayerUrl,"/partners")}}}),Jt=Kt,Qt=(n("4keQ"),Object(d["a"])(Jt,Yt,Ht,!1,null,"46bd9f9c",null)),Gt=Qt.exports,Xt={name:"VideoEditor",components:{PartnerInfo:Gt}},Zt=Xt,te=Object(d["a"])(Zt,Wt,qt,!1,null,null,null),ee=te.exports,ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"preview -array"},t._l(t.items,function(e){return n("div",{key:e,staticClass:"tag",domProps:{textContent:t._s(e)}})}))},ae=[],ie={props:{item:Object},computed:{content:function(){return this.item._content},config:function(){var t={};return c.a.each(this.item,function(e,n){c.a.startsWith(n,"_")||(t[n]=e)}),t}}},se=ie,oe=Object(d["a"])(se,g,b,!1,null,null,null),re=oe.exports,ce={extends:re,name:"ArrayPreview",computed:{items:function(){return c.a.isArray(this.content)?this.content:[this.content]}}},ue=ce,le=(n("3Q5W"),Object(d["a"])(ue,ne,ae,!1,null,"7315cc37",null)),de=le.exports,he=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"preview -calendar"},["date-multiple"!==t.config.MODE?n("div",{staticClass:"date",domProps:{textContent:t._s(t.previewText)}}):t._e(),t._l(t.previewText,function(e,a){return"date-multiple"===t.config.MODE?n("div",{key:a,staticClass:"tag",domProps:{textContent:t._s(e)}}):t._e()})],2)},me=[],pe={extends:re,name:"CalenderPreview",computed:{previewText:function(){return this.config.MODE&&"date-time"!==this.config.MODE||!c.a.has(this.config,"SECOND")||!1===this.config.SECOND?this.config.MODE&&"date-time"!==this.config.MODE?"date"===this.config.MODE?f()(this.content).format("YYYY-MM-DD"):"time"===this.config.MODE&&c.a.has(this.config,"SECOND")&&!1!==this.config.SECOND?f()(this.content).format("HH:mm:ss"):"time"===this.config.MODE?f()(this.content).format("HH:mm"):"date-range"===this.config.MODE?"".concat(f()(this.content.start).format("YYYY-MM-DD")," – ").concat(f()(this.content.end).format("YYYY-MM-DD")):"date-multiple"===this.config.MODE?c.a.isArray(this.content)?this.content.map(function(t){return f()(t).format("YYYY-MM-DD")}):"":void 0:f()(this.content).format("YYYY-MM-DD HH:mm"):f()(this.content).format("YYYY-MM-DD HH:mm:ss")}}},fe=pe,ve=(n("/MMh"),Object(d["a"])(fe,he,me,!1,null,"28505389",null)),ge=ve.exports,be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"preview -text",domProps:{textContent:t._s(t.previewText)}})},je=[],_e=(n("a1Th"),{extends:re,name:"CodePreview",computed:{previewText:function(){var t=c.a.toString(this.content);return t&&t.length<=70?t:t.substring(0,67)+"…"}}}),Ie=_e,we=(n("+1F3"),Object(d["a"])(Ie,be,je,!1,null,"6a1ee9f8",null)),Pe=we.exports,Ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"preview -color",style:{backgroundColor:t.content}})},ye=[],Oe={extends:re,name:"ColorPreview"},xe=Oe,$e=(n("jmMb"),Object(d["a"])(xe,Ce,ye,!1,null,"15c495ca",null)),Ee=$e.exports,ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"preview -image"},[t.content?n("img",{staticClass:"image",attrs:{src:t.previewImage,alt:""}}):t._e()])},Se=[],Ne={extends:re,name:"ImagePreview",computed:{previewImage:function(){var t=c.a.find(this.config.OPTIONS,{value:this.content});return c.a.has(t,"image")?t.image:c.a.isString(this.content)?this.content:c.a.has(this.content,"url")?this.content.url:void 0}}},De=Ne,Te=(n("/tC7"),Object(d["a"])(De,ke,Se,!1,null,"39a60dad",null)),Me=Te.exports,Ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"preview -option",domProps:{textContent:t._s(t.previewText)}})},Re=[],Be={extends:re,name:"OptionPreview",computed:{previewText:function(){var t=c.a.find(this.config.OPTIONS,{value:this.content});if(!t)return"…";var e=t.label?t.label:t.value;return e?e.length<=70?e:e.substring(0,67)+"…":"…"}}},Le=Be,Fe=(n("w7fp"),Object(d["a"])(Le,Ae,Re,!1,null,"1026ee65",null)),Ue=Fe.exports,Ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"preview -text",domProps:{textContent:t._s(t.previewText)}})},ze=[],We={extends:re,name:"TextPreview",computed:{previewText:function(){var t=c.a.toString(this.content),e=document.createElement("div");return e.innerHTML=t,t=e.innerText||"",t?t.length<=70?t:t.substring(0,67)+"…":"…"}}},qe=We,Ye=(n("32OQ"),Object(d["a"])(qe,Ve,ze,!1,null,"cfd026e8",null)),He=Ye.exports,Ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"preview -image"},[t.content?n("img",{staticClass:"image",attrs:{src:t.previewImage,alt:""}}):t._e(),n("icon",{attrs:{name:"play-circle"}})],1)},Je=[],Qe={extends:re,name:"VideoPreview",computed:{previewImage:function(){return this.content.thumbnail}}},Ge=Qe,Xe=(n("Va84"),Object(d["a"])(Ge,Ke,Je,!1,null,"26479b0e",null)),Ze=Xe.exports;e["a"]=[{schemaName:"calendar",editor:w,preview:ge},{schemaName:"checkbox",editor:$,preview:de},{schemaName:"code",editor:M,preview:Pe},{schemaName:"color",editor:z,preview:Ee},{schemaName:"image",editor:J,preview:Me},{schemaName:"input",editor:et,preview:He},{schemaName:"markdown",editor:ut,preview:He},{schemaName:"radio",editor:ft,preview:Ue},{schemaName:"rich-text",editor:Pt,preview:He},{schemaName:"select",editor:Et,preview:Ue},{schemaName:"select-image",editor:Mt,preview:Me},{schemaName:"textarea",editor:zt,preview:He},{schemaName:"video",editor:ee,preview:Ze}]},Pxnc:function(t,e,n){},QBT8:function(t,e,n){},QESl:function(t,e,n){},QWZd:function(t,e,n){},QctN:function(t,e,n){"use strict";(function(t){var a=n("Kw5r"),i=n("jE9Z"),s=n("Kf8i"),o=n("K54P"),r=n("JtMT");a["a"].use(i["a"]),e["a"]=new i["a"]({mode:"history",base:t,routes:[{name:"Dashboard",path:"/"},{name:"Register",path:"/register"},{name:"Schema",path:"/:projectId/schema/:path?",component:o["a"]},{name:"Settings",path:"/:projectId/settings/:path?",component:r["a"]},{name:"Content",path:"/:projectId/:path?",component:s["a"]}]})}).call(this,"/")},QpuV:function(t,e,n){},R0Xj:function(t,e,n){"use strict";var a=n("oxHR"),i=n.n(a);i.a},ROHU:function(t,e,n){"use strict";var a=n("JhKB"),i=n.n(a);i.a},UXnw:function(t,e,n){"use strict";var a=n("QWZd"),i=n.n(a);i.a},Uq9P:function(t,e,n){},VPUQ:function(t,e,n){"use strict";var a=n("PVfK"),i=n.n(a);i.a},VYAq:function(t,e,n){"use strict";var a=n("IqSa"),i=n.n(a);i.a},Va84:function(t,e,n){"use strict";var a=n("lyKL"),i=n.n(a);i.a},VnyG:function(t,e,n){"use strict";var a=n("dsqT"),i=n.n(a);i.a},Vtdi:function(t,e,n){"use strict";n.r(e);n("VRzm");var a=n("Kw5r"),i=n("Mb3Q"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{attrs:{id:"app"}},[t.showNavPanel?n("Navigation",{staticClass:"nav-panel"}):t._e(),n("Panel",{directives:[{name:"show",rawName:"v-show",value:t.showSidePanel,expression:"showSidePanel"}],staticClass:"side-panel"}),t.showMainPanel?n("section",{staticClass:"main-panel"},[n("header",{staticClass:"header"},[t.showBreadcrumb?n("Breadcrumb",{staticClass:"readcrumb"}):t._e()],1),t.showRouterView?n("router-view",{staticClass:"router-view"}):t._e(),t.showFooterContent?n("footer",{staticClass:"footer"},[n("FooterContent")],1):t._e()],1):t._e(),t.showDashboard?n("Dashboard"):t._e(),n("transition",{attrs:{name:"fade"}},[t.showAuth?n("Auth"):t._e()],1),n("Notifications"),n("transition",{attrs:{name:"fade"}},[t.showLoaderOverlay?n("LoaderOverlay"):t._e()],1)],1)},o=[],r=(n("f3/d"),n("gD9S")),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",{staticClass:"panel"},[n("div",{staticClass:"js-panel"},["object"===t.activeType?n("ItemsFromObject"):t._e(),"array"===t.activeType?n("ItemsFromArray"):t._e()],1)])},u=[],l=(n("KKXr"),n("pIFo"),n("LvDl")),d=n.n(l),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"items-from -object"},[n("header",{staticClass:"header"},[n("BackButton")],1),n("main",{staticClass:"main"},t._l(t.items,function(e){return n("Item",{key:e.path,attrs:{item:e,parentItems:t.items}})}))])},m=[],p=(n("dRSK"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("card-core",{staticClass:"item",class:{"-parent":t.isParent,"-active":t.isActive,"-draft":t.isDraft},attrs:{size:"small",link:""},nativeOn:{click:function(e){t.selectItem(t.item)}}},[n("header",{staticClass:"header"},[n("h2",{staticClass:"heading",domProps:{textContent:t._s(t.title)}}),n("hr"),t.isDraft?n("span",{staticClass:"draft"},[t._v("draft")]):t._e(),t.isParent?n("icon",{attrs:{name:"chevron-right"}}):t._e()],1),n(t.activePreviewComponentName,{tag:"component",attrs:{item:t.item}})],1)}),f=[],v=n("WnLM"),g=n.n(v),b=n("PY3e"),j={},_=[];d.a.each(b["a"],function(t){j[t.preview.name]=t.preview,_.push(t.schemaName)});var I={name:"Item",props:{item:Object,parentItems:Object},components:j,computed:{projectId:function(){return this.$route.params.projectId},isActive:function(){return"Content"===this.$route.name&&!(this.item._path!==d.a.replace(this.$route.params.path,/>/g,"."))},isParent:function(){return"object"===this.item._type||"array"===this.item._type},isDraft:function(){return"draft"===this.item._status},activePreviewComponentName:function(){var t=d.a.find(b["a"],{schemaName:this.item.EDITOR});return!!t&&t.preview.name},title:function(){return this.item.TITLE?this.item.TITLE:"…"}},methods:{selectItem:function(t){var e=this,n=t.FILE_ID?t.FILE_ID:this.projectId,a="item"===t._type?"Content":this.$route.name,i=d.a.replace(t._path,/\./g,">");if("item"===t._type)return this.$router.push({name:a,params:{projectId:n,path:i}}),!1;"Dashboard"===a&&(a="schema"===this.$route.params.view?"Schema":"Content"),g.a.timeline().add({targets:".js-panel",translateX:"-100%",opacity:0,easing:"linear",duration:150}).add({targets:".js-panel",translateX:"100%",duration:0,complete:function(t){i?e.$router.push({name:a,params:{projectId:n,path:i}}):e.$router.push({name:a,params:{projectId:n}})}}).add({targets:".js-panel",translateX:0,opacity:1,easing:"linear",duration:150})}}},w=I,P=(n("VwXZ"),n("KHd+")),C=Object(P["a"])(w,p,f,!1,null,"6a749c5e",null),y=C.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button-core",{attrs:{light:""},nativeOn:{click:function(e){t.goBack()}}},[n("icon",{attrs:{name:"chevron-left"}}),1===t.breadcrumb.length?n("span",[t._v("Dashboard")]):t._e(),t.breadcrumb.length>1?n("span",[t._v("Back")]):t._e()],1)},x=[],$={name:"BackButton",computed:{activeProject:function(){return this.$store.getters.activeProject},structure:function(){return this.$store.getters.structure},activeItem:function(t,e){return this.$store.getters.activeItem},breadcrumb:function(){var t=[],e=[];this.$route.params.path&&(e=d.a.split(this.$route.params.path,">")),d.a.has(this.activeItem,"EDITOR")&&(e=d.a.dropRight(e));while(e.length>0){var n=d.a.join(e,"."),a=d.a.get(this.structure,n);a&&!d.a.has(a,"_order")&&t.unshift({path:n,projectId:this.$route.params.projectId}),e=d.a.dropRight(e)}return this.$route.params.projectId&&this.activeProject&&t.unshift({name:this.activeProject.name,projectId:this.$route.params.projectId}),t}},methods:{goBack:function(){var t=this.breadcrumb[this.breadcrumb.length-2];t?this.selectItem(t):this.$router.push({name:"Dashboard"})},selectItem:function(t){var e=this,n=d.a.replace(t.path,/\./g,">");g.a.timeline().add({targets:".js-panel",translateX:"100%",opacity:0,easing:"linear",duration:150}).add({targets:".js-panel",translateX:"-100%",duration:0,complete:function(a){t.projectId&&n?e.$router.push({name:e.$route.name,params:{projectId:t.projectId,path:n}}):t.projectId&&e.$router.push({name:e.$route.name,params:{projectId:t.projectId}})}}).add({targets:".js-panel",translateX:0,opacity:1,easing:"linear",duration:150})}}},E=$,k=(n("/iI1"),Object(P["a"])(E,O,x,!1,null,"af7b48a6",null)),S=k.exports,N={name:"ItemsFromObject",components:{Item:y,BackButton:S},computed:{structure:function(){return this.$store.getters.structure},activeItem:function(){var t=d.a.replace(this.$route.params.path,/>/g,"."),e=d.a.chain(t).split(".").dropRight().join(".").value(),n=d.a.get(this.structure,t);return"object"===d.a.get(n,"_type")?n:t&&e?d.a.get(this.structure,e):this.structure},items:function(){var t={};return d.a.each(this.activeItem,function(e,n){d.a.isPlainObject(e)&&(t[n]=e)}),t}},watch:{activeItem:function(t){this.selectFirstItem()}},methods:{selectFirstItem:function(){if(this.$store.state.utils.windowWidth<=900)return null;if(!this.activeItem)return!1;if("Content"!==this.$route.name)return!1;var t=d.a.replace(this.$route.params.path,/>/g,".");if(""!==t&&t!==this.activeItem._path)return!1;var e=d.a.find(this.activeItem,{_type:"item"});if(e&&"item"!==this.activeItem._type){var n=d.a.replace(e._path,/\./g,">");this.$router.replace({name:"Content",params:{projectId:this.$route.params.projectId,path:n}})}},isActive:function(t){return!(t!==d.a.replace(this.$route.params.path,/>/g,"."))}},created:function(){this.selectFirstItem()}},D=N,T=Object(P["a"])(D,h,m,!1,null,null,null),M=T.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"items-from -array",class:{"-moving":null!==t.movingArrayItem.path}},[n("header",{staticClass:"header"},[n("BackButton"),t.manageItems?t._e():n("button-core",{attrs:{size:"small",light:""},nativeOn:{click:function(e){t.manageItems=!0}}},[n("span",[t._v("Manage items")])]),t.manageItems?n("button-core",{attrs:{size:"small",light:""},nativeOn:{click:function(e){t.manageItems=!1}}},[n("span",[t._v("Done")])]):t._e()],1),n("main",{staticClass:"main"},[n("header",{staticClass:"header"},[n("button-core",{attrs:{mode:"success"},nativeOn:{click:function(e){t.newItem()}}},[n("icon",{attrs:{name:"plus"}}),n("span",[t._v("New Item")])],1)],1),0===t.arrayItems.length?n("div",{staticClass:"no-items"},[n("div",[t._v("No items - add first item")])]):t._e(),t._l(t.arrayItems,function(e,a){return n("section",{key:a,staticClass:"array-item"},[null!==t.movingArrayItem.path&&t.movingArrayItem.path!==e._path&&t.movingArrayItem.idx!==a-1?n("button-core",{staticClass:"move-here",attrs:{mode:"primary"},nativeOn:{click:function(n){t.moveHere(e,a)}}},[t._v("\n        Move Here\n      ")]):t._e(),t.manageItems?n("div",{staticClass:"tools"},[t.confirmDeleteIdx!==a?n("button-core",{attrs:{size:"small",light:""},nativeOn:{click:function(n){t.moveArrayItem(e,a)}}},[t._v("Move")]):t._e(),t.confirmDeleteIdx!==a?n("button-core",{attrs:{size:"small",light:""},nativeOn:{click:function(e){t.deleteArrayItem(a)}}},[t._v("Delete")]):t._e(),t.confirmDeleteIdx===a?n("div",{staticClass:"confirm"},[n("div",[t._v("Are you sure?")]),n("button-core",{attrs:{size:"small",light:""},nativeOn:{click:function(e){t.confirmDeleteNo()}}},[t._v("No")]),n("button-core",{attrs:{size:"small",mode:"danger",light:""},nativeOn:{click:function(n){t.confirmDeleteYes(e,a)}}},[t._v("Yes")])],1):t._e()],1):t._e(),n("div",{staticClass:"items",class:{"-moving":t.movingArrayItem.path===e._path},on:{click:function(n){t.moveCancel(e)}}},t._l(e,function(a){return"object"===typeof a?n("Item",{key:a._path,attrs:{item:a,parentItems:e}}):t._e()}))],1)}),null!==t.movingArrayItem.path&&t.movingArrayItem.idx!==t.arrayItems.length-1?n("button-core",{staticClass:"move-last",attrs:{mode:"primary"},nativeOn:{click:function(e){t.moveHere("last")}}},[t._v("\n      Move Here\n    ")]):t._e()],2)])},R=[],B=(n("Z2Ku"),n("L9s1"),n("9VmF"),n("2yJ6")),L=n.n(B),F=n("adgz"),U={name:"ItemsFromArray",components:{Item:y,BackButton:S},data:function(){return{manageItems:!1,movingArrayItem:{idx:null,path:null},confirmDeleteIdx:null}},computed:{structure:function(){return this.$store.getters.structure},activeItem:function(){var t=d.a.replace(this.$route.params.path,/>/g,"."),e=d.a.chain(t).split(".").dropRight().dropRight().join(".").value(),n=d.a.get(this.structure,t);return"array"===d.a.get(n,"_type")?n:d.a.get(this.structure,e)},projectId:function(){return this.$route.params.projectId},activeProject:function(){return this.$store.getters.activeProject},arrayItems:function(){var t=[],e=[];return d.a.each(this.activeItem,function(t,n){d.a.startsWith(n,"-")&&e.push(t)}),e=d.a.sortBy(e,["_order"]),d.a.each(e,function(e,n){d.a.isPlainObject(e)&&"_array"!==n&&d.a.each(e,function(e,a){d.a.set(t,"".concat(n,".").concat(a),e)})}),t},arrayItemsAmount:function(){return this.arrayItems.length}},watch:{activeItem:function(t){this.selectFirstItem()}},methods:{newItem:function(){var t=d.a.replace(this.$route.params.path,/>/g,".");t!==this.activeItem._path&&d.a.includes(t,".-")&&(t=d.a.chain(t).split(".-").slice(0,-1).join(".-").value());var e=L()("abcdefghijklmnopqrstuvwxyz",4),n="draft.".concat(t),a="".concat(n,".-").concat(e),i=0;if(d.a.has(this.activeProject,a))return this.newItem(),!1;d.a.each(this.arrayItems,function(t,e){i>=t._order&&(i=t._order-1)});var s={};s[a]={_order:i},F["a"].firestore.collection("projects").doc(this.projectId).update(s).catch(function(t){return console.error("Error new item:",t)})},selectFirstItem:function(){if(this.$store.state.utils.windowWidth<=900)return null;var t=d.a.replace(this.$route.params.path,/>/g,".");if(t!==this.activeItem._path)return!1;if("Content"!==this.$route.name)return!1;var e=d.a.find(this.arrayItems[0],{_type:"item"});if(e&&"array"===this.activeItem._type){var n=d.a.replace(e._path,/\./g,">");this.$router.replace({name:"Content",params:{projectId:this.projectId,path:n}})}},isActive:function(t){return!(t!==d.a.replace(this.$route.params.path,/>/g,"."))},moveArrayItem:function(t,e){e=d.a.toNumber(e),this.movingArrayItem={idx:e,path:t._path}},moveHere:function(t,e){e=d.a.toNumber(e);var n=null;n="first"===t?this.arrayItems[0]._order-1:"last"===t?this.arrayItems[this.arrayItems.length-1]._order+1:0===e?t._order-1:(this.arrayItems[e-1]._order+t._order)/2,this.$store.dispatch("updateContent",{projectId:this.projectId,path:"".concat(this.movingArrayItem.path,"._order"),content:n}),this.movingArrayItem={idx:null,path:null}},moveCancel:function(t){if(t._path!==this.movingArrayItem.path)return!1;this.movingArrayItem={idx:null,path:null}},deleteArrayItem:function(t){this.confirmDeleteIdx=t},confirmDeleteYes:function(t,e){var n={};n["draft.".concat(t._path)]=F["a"].firestoreDelete;var a=e>0?e-1:1,i=d.a.get(this.arrayItems,"".concat(a,"._path")),s=d.a.chain(this.$route.params.path).split(">").slice(0,-1).join(".").value();i&&t._path===s&&this.$router.replace({name:this.$route.name,params:{projectId:this.projectId,path:i}}),F["a"].firestore.collection("projects").doc(this.projectId).update(n).then(function(){}).catch(function(t){return console.error("Error deleting item",t)}),this.confirmDeleteIdx=null},confirmDeleteNo:function(t){this.confirmDeleteIdx=null}},created:function(){this.selectFirstItem()}},V=U,z=(n("MKXb"),Object(P["a"])(V,A,R,!1,null,"64ab563f",null)),W=z.exports,q={name:"SidePanel",components:{ItemsFromObject:M,ItemsFromArray:W},computed:{projectId:function(){return this.$route.params.projectId},structure:function(){return this.$store.getters.structure},activeItem:function(){return this.$store.getters.activeItem},activeType:function(){var t=d.a.replace(this.$route.params.path,/>/g,"."),e=d.a.get(this.structure,d.a.chain(t).split(".").dropRight(2).join(".").value());return this.activeItem&&"array"===this.activeItem._type?"array":e&&this.activeItem&&"array"===e._type&&"item"===this.activeItem._type?"array":"object"}},watch:{activeItem:function(t){this.redirectToParentIfInvalidPath()}},methods:{redirectToParentIfInvalidPath:function(){var t=d.a.replace(this.$route.params.path,/>/g,"."),e=d.a.has(this.structure,t);if(d.a.isEmpty(this.structure)||!0===e)return!1;var n=d.a.chain(this.$route.params.path).split(">").slice(0,-1).join(">").value();n?this.$router.replace({name:this.$route.name,params:{projectId:this.projectId,path:n}}):this.$router.replace({name:this.$route.name,params:{projectId:this.projectId}})}}},Y=q,H=(n("5JC6"),Object(P["a"])(Y,c,u,!1,null,"4ead17cf",null)),K=H.exports,J=n("wi9O"),Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"footer-content"})},G=[],X={name:"FooterContent"},Z=X,tt=(n("rOZ7"),Object(P["a"])(Z,Q,G,!1,null,"690e3230",null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"notifications"},t._l(t.notifications.items,function(t,e){return n("div",{key:e},[n("transition",{attrs:{name:"fade"}},[n("notification-core",{attrs:{mode:t.mode,message:t.message,link:t.link,progress:t.progress,id:e}})],1)],1)}))},at=[],it={name:"Notifications",computed:{notifications:function(){return this.$store.state.notifications}}},st=it,ot=(n("tQNA"),Object(P["a"])(st,nt,at,!1,null,"a52cae86",null)),rt=ot.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loader-overlay"},[n("icon",{attrs:{name:"spinner",spin:""}}),n("div",{staticClass:"text"},[t._v("Loading")])],1)},ut=[],lt={name:"LoaderOverlay"},dt=lt,ht=(n("Ma+q"),Object(P["a"])(dt,ct,ut,!1,null,"ba801af8",null)),mt=ht.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"dashboard"},[n("Navigation"),n("main",{staticClass:"content"},[n("section",{staticClass:"tools"},[n("heading-core",{attrs:{mode:"primary"}},[t.isProjects?n("h1",[t._v("My projects")]):t._e()]),n("hr"),t.allowCreateProject?n("NewProjectButton"):t._e()],1),t.isProjects?t._e():n("section",{staticClass:"no-projects"},[n("div",{staticClass:"content"},[n("icon",{staticClass:"icon",attrs:{name:"kiwi-bird"}}),t.allowCreateProject?n("div",[t._v('You don\'t have any projects. Create the first project by clicking the "New Project" button.')]):t._e(),t.allowCreateProject?t._e():n("div",[t._v("You don't have a permission to any projects. Come back later or ask more from the administrator.")])],1)]),n("Projects")],1),n("footer",{staticClass:"footer"},[n("FooterContent")],1)],1)},ft=[],vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"projects"},t._l(t.projects,function(e){return n("div",{key:e.id,staticClass:"project"},[n("card-core",{attrs:{link:""},nativeOn:{click:function(n){t.selectProject(e,n)}}},[n("header",{staticClass:"header"},[n("h2",{domProps:{textContent:t._s(e.name)}}),"draft"===e.status?n("div",{staticClass:"draft"},[t._v("draft")]):t._e()]),n("main",{staticClass:"main"},[n("div",{staticClass:"line"},[n("icon",{attrs:{name:"regular/user"}}),n("span",{staticClass:"text"},[t.usersCount(e,"admin")?n("span",{class:{"my-role":"admin"===e.auth.role}},[t._v("\n              "+t._s(t.usersText(e,"admin","Admin","Admins"))+"\n            ")]):t._e(),t.usersCount(e,"admin")&&t.usersCount(e,"editor")?n("span",[t._v(", ")]):t._e(),t.usersCount(e,"editor")?n("span",{class:{"my-role":"editor"===e.auth.role}},[t._v("\n              "+t._s(t.usersText(e,"editor","Editor","Editors"))+"\n            ")]):t._e()])],1),n("div",{staticClass:"line"},[n("icon",{attrs:{name:"regular/clock"}}),n("span",{staticClass:"text",domProps:{textContent:t._s(t.publishedAgo(e))}})],1)])])],1)}))},gt=[],bt=n("Wgwc"),jt=n.n(bt),_t=n("QgiU"),It=n.n(_t);jt.a.extend(It.a);var wt={name:"Projects",computed:{projects:function(){return this.$store.getters.projects}},methods:{selectProject:function(t){this.$router.push({name:"Content",params:{projectId:t.id}})},usersCount:function(t,e){return d.a.filter(t.users,{role:e}).length},usersText:function(t,e,n,a){var i=this.usersCount(t,e);return i>1?"".concat(i," ").concat(a):"".concat(i," ").concat(n)},publishedAgo:function(t){var e=1e3*d.a.get(t,"publishedVersion.publishedAt.seconds"),n=jt()(e).fromNow();return e?"Published ".concat(n):"Never published"}}},Pt=wt,Ct=(n("Iuqy"),Object(P["a"])(Pt,vt,gt,!1,null,"ba8a4db6",null)),yt=Ct.exports,Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"new-project"},[n("button-core",{attrs:{size:"large",mode:"success"},nativeOn:{click:function(e){t.openModal()}}},[n("icon",{attrs:{name:"plus"}}),n("span",[t._v("New Project")])],1),n("transition",{attrs:{name:"fade--fast"}},["new-project"===t.activeModal?n("NewProjectModal"):t._e()],1)],1)},xt=[],$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"modal",attrs:{method:"post"},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.closeModal()},submit:function(e){e.preventDefault(),t.newProject()}}},[n("card-core",[n("header",{staticClass:"header"},[n("h1",{staticClass:"heading -feature"},[t._v("New Project")])]),n("main",{staticClass:"main"},[n("label",{staticClass:"label"},[n("div",[t._v("Project name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"projectName",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),n("footer",{staticClass:"footer"},[n("hr"),n("button-core",{attrs:{light:""},nativeOn:{click:function(e){t.closeModal()}}},[t._v("Cancel")]),n("button-core",{attrs:{type:"submit",mode:"success"}},[t._v("Create new project")])],1)])],1)},Et=[],kt={name:"NewProjectModal",data:function(){return{name:""}},methods:{newProject:function(){null!==this.name&&""!==this.name&&(this.$store.dispatch("newProject",{name:this.name}),this.closeModal())},closeModal:function(){this.$store.commit("setActiveModal",null)}},mounted:function(){this.$refs.projectName.focus()}},St=kt,Nt=(n("R0Xj"),Object(P["a"])(St,$t,Et,!1,null,"2b6e5ea3",null)),Dt=Nt.exports,Tt={name:"NewProjectButton",components:{NewProjectModal:Dt},data:function(){return{name:""}},computed:{activeModal:function(){return this.$store.state.utils.activeModal}},methods:{openModal:function(){this.$store.commit("setActiveModal","new-project")}}},Mt=Tt,At=(n("m2yj"),Object(P["a"])(Mt,Ot,xt,!1,null,"71d81b62",null)),Rt=At.exports,Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navigation"},[n("button-core",{staticClass:"logo",attrs:{mode:"invert",light:"",href:"https://editlayer.com"}},[n("icon",{attrs:{name:"editlayer"}}),n("span",[t._v("Editlayer")])],1),n("hr"),n("button-core",{staticClass:"logout",attrs:{mode:"invert",light:""},nativeOn:{click:function(e){t.logout()}}},[n("div",{staticClass:"text"},[n("span",[t._v("Logout")]),n("div",{staticClass:"email",domProps:{textContent:t._s(t.email)}})]),n("icon",{staticClass:"icon -logout",attrs:{name:"sign-out-alt"}})],1)],1)},Lt=[],Ft={name:"Navigation",computed:{email:function(){return this.$store.getters.auth.email}},methods:{logout:function(){F["a"].auth.signOut().catch(function(t){return console.error("Logout failed",t)})}}},Ut=Ft,Vt=(n("NaSU"),Object(P["a"])(Ut,Bt,Lt,!1,null,"003fc8fa",null)),zt=Vt.exports,Wt={name:"Dashboard",components:{Navigation:zt,Projects:yt,NewProjectButton:Rt,FooterContent:et},computed:{allowCreateProject:function(){return!0===d.a.get(this.$store.getters,"auth.permissions.createProject")},isProjects:function(){return!d.a.isEmpty(this.$store.getters.projects)}},mounted:function(){this.$route.params.view&&"schema"!==this.$route.params.view&&this.$router.push({name:"Content",params:{projectId:this.$route.params.view}})}},qt=Wt,Yt=(n("dEF6"),Object(P["a"])(qt,pt,ft,!1,null,"634f826c",null)),Ht=Yt.exports,Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"auth",class:{"-progress":t.progress}},[n("div",{staticClass:"content"},[n("form",{staticClass:"form",on:{submit:function(e){e.preventDefault(),t.submit()}}},[n("h1",{staticClass:"heading -logo"},["login"===t.state?n("span",[t._v("\n          Login to your account\n        ")]):t._e(),"register"===t.state?n("span",[t._v("\n          Register new account\n        ")]):t._e(),"forget"===t.state?n("span",[t._v("\n          Reset your password\n        ")]):t._e()]),n("label",{staticClass:"field",class:{"-error":"email"===t.error}},[n("div",[t._v("Email")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),"forget"!==t.state?n("label",{staticClass:"field",class:{"-error":"password"===t.error}},[n("div",[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),"login"===t.state?n("div",{staticClass:"forget"},[t._v("\n          Forget password? "),n("a",{on:{click:function(e){t.changeState("forget")}}},[t._v("Reset Password")])]):t._e()]):t._e(),n("button-core",{attrs:{mode:"primary",disabled:t.progress,type:"submit"}},["login"===t.state?n("span",[t._v("Login")]):t._e(),"register"===t.state?n("span",[t._v("Register")]):t._e(),"forget"===t.state?n("span",[t._v("Send reset link")]):t._e()]),"forget"===t.state?n("div",{staticClass:"forget"},[n("a",{on:{click:function(e){t.changeState("login")}}},[t._v("Back")])]):t._e()],1),n("footer",{staticClass:"footer"},["login"===t.state?n("div",[t._v("\n        Don’t have an account? "),n("a",{on:{click:function(e){t.changeState("register")}}},[t._v("Register")])]):t._e(),"register"===t.state?n("div",[t._v("\n        You have already account? "),n("a",{on:{click:function(e){t.changeState("login")}}},[t._v("Login")])]):t._e()])])])},Jt=[],Qt={name:"Auth",data:function(){return{state:"Register"===this.$route.name?"register":"login",email:"",password:"",error:null,progress:!1}},watch:{email:function(){this.error=null},password:function(){this.error=null}},methods:{submit:function(){this.error=null,this.progress=!0,"login"===this.state?this.login():"register"===this.state?this.register():"forget"===this.state&&this.resetPassword()},login:function(){var t=this;F["a"].auth.signInWithEmailAndPassword(this.email,this.password).catch(function(e){console.error("Logged in faild",e),t.progress=!1,t.$store.commit("setNotification",{mode:"danger",message:e.message}),d.a.includes(["auth/invalid-email","auth/user-not-found"],e.code)?t.error="email":d.a.includes(["auth/wrong-password"],e.code)&&(t.error="password")})},register:function(){var t=this;F["a"].auth.createUserWithEmailAndPassword(this.email,this.password).catch(function(e){console.error("register error",e),t.progress=!1,d.a.includes(["auth/invalid-email","auth/email-already-in-use"],e.code)?t.error="email":d.a.includes(["auth/weak-password"],e.code)?t.error="password":d.a.includes(["auth/operation-not-allowed"],e.code)?alert(e.message):alert("Unknown error! Try again later or contact us editlayer@gmail.com")})},resetPassword:function(){var t=this;F["a"].auth.sendPasswordResetEmail(this.email).then(function(){t.changeState("login"),t.progress=!1}).catch(function(e){t.error="email",console.error("Reseting faild",e),t.progress=!1})},changeState:function(t){this.state=t}}},Gt=Qt,Xt=(n("1Uzd"),Object(P["a"])(Gt,Kt,Jt,!1,null,"76b767eb",null)),Zt=Xt.exports,te={name:"App",components:{Navigation:r["a"],Panel:K,Breadcrumb:J["a"],FooterContent:et,Auth:Zt,Notifications:rt,LoaderOverlay:mt,Dashboard:Ht},computed:{activeProject:function(){return this.$store.getters.activeProject},activeItem:function(){return this.$store.getters.activeItem},showRouterView:function(){return this.activeProject&&!0===this.$store.getters.isLoggedIn&&null!==this.$store.state.projects.admin&&null!==this.$store.state.projects.editor},showNavPanel:function(){return!!this.activeProject},showSidePanel:function(){return!!this.activeProject&&"Settings"!==this.$store.state.route.name&&("Schema"!==this.$store.state.route.name||this.$store.state.utils.windowWidth>900)&&("item"!==this.activeItem._type||this.$store.state.utils.windowWidth>900)},showBreadcrumb:function(){return!!this.activeProject&&("Content"===this.$store.state.route.name||"Schema"===this.$store.state.route.name)},showLoaderOverlay:function(){return null===this.$store.getters.isLoggedIn||null===this.$store.getters.projects},showAuth:function(){return!1===this.$store.getters.isLoggedIn},showMainPanel:function(){return"Dashboard"!==this.$store.state.route.name&&("Content"!==this.$store.state.route.name||"item"===this.activeItem._type||this.$store.state.utils.windowWidth>900)},showDashboard:function(){return!0===this.$store.getters.isLoggedIn&&"Dashboard"===this.$store.state.route.name},showFooterContent:function(){return!!this.activeProject}},created:function(){this.$store.dispatch("authState"),this.$store.dispatch("resizeListener")}},ee=te,ne=(n("8At8"),Object(P["a"])(ee,s,o,!1,null,"30825409",null)),ae=ne.exports,ie=n("QctN"),se=n("L2JU"),oe=n("LbDd"),re=n.n(oe),ce=n("yT7P"),ue=(n("SRfc"),n("zYwU")),le=n.n(ue),de=n("hctw"),he=n.n(de),me=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d.a.each(e,function(e,i){if(he()(i)||d.a.startsWith(i,"_"))return!0;var s=a?"".concat(a,".").concat(i):i,o={};if(d.a.isString(e)){if(o.EDITOR=e,d.a.includes(e,":")&&(o.EDITOR=e.split(":")[0].trim(),o.MODE=e.split(":")[1].trim()),d.a.includes(e,"[")&&d.a.includes(e,"]")){o.EDITOR=e.split("[")[0].trim(),o.OPTIONS=[];var r=e.match(/\[(.*?)\]/)[1].split(",");d.a.each(r,function(t){o.OPTIONS.push({value:t.trim()})})}}else o=e;d.a.set(n,s,o),d.a.isObject(e)&&(n=t(e,n,s))}),n},pe=function t(e,n,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return d.a.each(n,function(s,o){if(he()(o)||d.a.startsWith(o,"_"))return!0;var r=i?"".concat(i,".").concat(o):o;if(d.a.isArray(s)&&d.a.isArray(d.a.get(e,r))){var c=s[0],u=d.a.get(d.a.cloneDeep(a),r),l={_type:"array"};d.a.isPlainObject(u)||(u=null),d.a.each(u,function(t,e){d.a.set(l,e,t),d.a.each(c,function(t,n){d.a.set(l,"".concat(e,".").concat(n),t)})}),d.a.set(e,r,l),e=t(e,n,a,i)}d.a.isObject(s)&&(e=t(e,s,a,r))}),e},fe=function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d.a.each(n,function(n,i){if(he()(i)||d.a.startsWith(i,"_"))return!0;var s=a?"".concat(a,".").concat(i):i;if(d.a.isPlainObject(n)){var o=Object(ce["a"])({},n,{_path:s});d.a.set(e,s,o)}d.a.isObject(n)&&(e=t(e,n,s))}),e},ve=function t(e,n,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return d.a.each(n,function(n,s){if(he()(s)||d.a.startsWith(s,"_"))return!0;var o=i?"".concat(i,".").concat(s):s;if(d.a.has(n,"EDITOR")){var r=d.a.get(d.a.cloneDeep(a),o);void 0===r&&(r=n.DEFAULT||null),d.a.set(e,"".concat(o,"._content"),r)}d.a.isObject(n)&&(e=t(e,n,a,o))}),e},ge=function t(e,n,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return d.a.each(n,function(s,o){if(he()(o)||d.a.startsWith(o,"_"))return!0;var r=i?"".concat(i,".").concat(o):o;if(d.a.has(s,"IF")&&d.a.startsWith(s.IF,"@")){var c=s.IF.split("=")[0].replace("@","").trim(),u=d.a.chain(r).split(".").slice(0,-1).push(c).join(".").value(),l=null,h=s.IF.split("=")[1].trim().split("|");d.a.has(e,u)?l=d.a.get(d.a.cloneDeep(a),u):d.a.has(e,c)&&(l=d.a.get(d.a.cloneDeep(a),c)),l&&!d.a.includes(h,l)&&delete n[o]}d.a.isObject(s)&&(e=t(e,s,a,r))}),e},be=function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d.a.each(n,function(n,i){if(he()(i)||d.a.startsWith(i,"_"))return!0;var s=a?"".concat(a,".").concat(i):i;if(d.a.isPlainObject(n)&&!d.a.has(n,"_type")){var o=d.a.has(n,"EDITOR")?"item":"object";d.a.set(e,"".concat(s,"._type"),o)}d.a.isObject(n)&&(e=t(e,n,s))}),e},je=function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d.a.each(n,function(n,i){if(he()(i)||d.a.startsWith(i,"_"))return!0;var s=a?"".concat(a,".").concat(i):i;if(d.a.isPlainObject(n)&&!d.a.has(n,"TITLE")){var o=le()(i);d.a.set(e,"".concat(s,".TITLE"),o)}d.a.isObject(n)&&(e=t(e,n,s))}),e},_e=function t(e,n,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return d.a.each(n,function(s,o){var r=i?"".concat(i,".").concat(o):o;if(d.a.isString(s)&&d.a.startsWith(s,"@")&&"IF"!==o){var c="item"===n._type?-2:-1,u=s.replace("@","").trim(),l=d.a.chain(r).split(".").slice(0,c).push(u).join(".").value(),h=null;d.a.has(e,l)&&u!==n._path.split(".").pop()?h=d.a.get(d.a.cloneDeep(a),l):d.a.has(e,u)&&(h=d.a.get(d.a.cloneDeep(a),u)),h&&d.a.set(e,"".concat(r),h)}d.a.isObject(s)&&(e=t(e,s,a,r))}),e},Ie=function t(e,n,a,i){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return d.a.each(n,function(n,o){if(he()(o)||d.a.startsWith(o,"_"))return!0;var r=s?"".concat(s,".").concat(o):o;if(d.a.isPlainObject(n)){var c=d.a.isEqual(d.a.get(d.a.cloneDeep(a),n._path),d.a.get(d.a.cloneDeep(i),n._path))?"published":"draft";d.a.set(e,"".concat(r,"._status"),c)}d.a.isObject(n)&&(e=t(e,n,a,i,r))}),e},we=function(t,e,n){var a=me(t),i=a;return pe(i,i,e),fe(i,i),ve(i,i,e),ge(i,i,e),be(i,i),je(i,i),_e(i,i,e),Ie(i,i,e,n),i},Pe=(n("ls82"),n("MECJ")),Ce=(n("rGqo"),{state:{projects:null,user:null},mutations:{setUser:function(t,e){t.user=e},setProjects:function(t,e){t.projects=e}},actions:{authState:function(t){t.state;var e=t.commit,n=t.dispatch,a=t.rootState;F["a"].auth.onAuthStateChanged(function(t){if(!t)return e("setUser",!1),e("setProjects",!1),null;n("getUserFromFirestore",t.uid),n("getProjectsFromFirestore",{id:t.uid,email:t.email}),"Register"===a.route.name&&ie["a"].push({name:"Dashboard"})})},getUserFromFirestore:function(t,e){t.state;var n=t.commit;F["a"].firestore.collection("users").doc(e).onSnapshot(function(t){n("setUser",Object(ce["a"])({id:e},t.data()))})},getProjectsFromFirestore:function(t,e){t.state;var n=t.commit;F["a"].firestore.collection("projects").where("users.".concat(e.id,".email"),"==",e.email).onSnapshot(function(t){var e={};t.forEach(function(t){e[t.id]=t.data()}),n("setProjects",e)})},newProjectToFirestore:function(t,e){t.state;var n=t.dispatch;console.log("newProjectToFirestore",e);var a=e.newProject;e=e.payload,F["a"].firestore.collection("projects").doc(e.id).set(a).catch(function(t){if(e.tries=e.tries?e.tries+1:1,e.tries<5){var a=e.tries>1?e.id.slice(0,-5):e.id,i=L()("abcdefghijklmnopqrstuvwxyz",4);e.id="".concat(a,"-").concat(i),n("newProject",e)}else console.error("Creating new project failed",t)})},deleteProjectFromFirestore:function(t,e){t.state;F["a"].firestore.collection("projects").doc(e.id).collection("jobs").add({job:"deleteProject",deleteProjectId:e.id}).catch(function(t){return console.error("Project deleting failed",t)})},newProjectVersionToFirestore:function(t,e){t.state;return F["a"].firestore.collection("projects").doc(e.projectId).collection("versions").add({publishedBy:e.publishedBy,publishedAt:F["a"].firestoreTimestamp,json:e.json,token:e.token,schema:e.schema,draft:e.draft}).catch(function(t){return console.error("Error adding version:",t)})},setProjectPublished:function(t,e){t.state;var n={};n["published"]={draft:e.draft,schema:e.schema,publishedAt:F["a"].firestoreTimestamp,versionId:e.versionId},F["a"].firestore.collection("projects").doc(e.projectId).update(n)},updateDraftToFirestore:function(t,e){t.state,t.getters;var n={};n["draft.".concat(e.path)]=e.content,F["a"].firestore.collection("projects").doc(e.projectId).update(n).catch(function(t){return console.error("Error updating content:",t)})},updateSchemaToFirestore:function(t,e){t.state;F["a"].firestore.collection("projects").doc(e.projectId).update({schema:e.schema}).catch(function(t){return console.error("Error writing schema:",t)})},newPermissionToFirestore:function(t,e){t.commit,t.getters;F["a"].firestore.collection("projects").doc(e.projectId).collection("jobs").add({job:"addUserToProject",email:e.email,permissions:{publish:!0,updateDraft:!0}}).catch(function(t){return console.error("Add user job adding failed",t)})},addUserToProjectToFirestore:function(){var t=Object(Pe["a"])(regeneratorRuntime.mark(function t(e,n){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.commit,e.getters,a={},a["users.".concat(n.awaitId)]=n.user,console.log("addUserToProjectToFirestore",n),t.next=6,F["a"].firestore.collection("projects").doc(n.projectId).update(a).catch(function(t){return console.error("Add user job adding failed",t)});case 6:F["a"].firestore.collection("projects").doc(n.projectId).collection("jobs").add({job:"attachUserToProject",email:n.email,awaitId:n.awaitId,projectId:n.projectId}).catch(function(t){return console.error("Add user job adding failed",t)});case 7:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),updatePermissionToFirestore:function(t,e){t.state;var n={};n["users.".concat(e.userId,".permissions")]=e.permissions,F["a"].firestore.collection("projects").doc(e.projectId).update(n).catch(function(t){return console.error("Permission updating failed",t)})},removeUserFromProjectToFirestore:function(t,e){t.state;var n={};n["users.".concat(e.userId)]=F["a"].firestoreDelete,F["a"].firestore.collection("projects").doc(e.projectId).update(n).catch(function(t){return console.error("Permission deleting failed",t)})}}}),ye=(n("tUrg"),n("o7/x")),Oe=n.n(ye),xe={state:{items:{}},mutations:{setNotification:function(t,e){var n={};e.id=e.id||Oe()(),d.a.has(t.items,e.id)&&(n=d.a.get(t.items,e.id)),n.mode=e.mode||n.mode,n.message=e.message||n.message,n.link=e.link||n.link,n.progress=e.progress||n.progress,a["a"].set(t.items,e.id,n)},deleteNotification:function(t,e){a["a"].delete(t.items,e.id)}}},$e=n("wUQs"),Ee=n.n($e),ke=n("J66h"),Se=n("99mF"),Ne={state:{processes:{}},mutations:{setPublishProcess:function(t,e){a["a"].set(t.processes,e.projectId,{status:"publishing",message:null})},updatePublishProcess:function(t,e){var n=d.a.get(t.processes,e.projectId),i=d.a.merge(n,{versionId:e.versionId,status:e.status,message:e.message});a["a"].set(t.processes,e.projectId,i)}},getters:{projects:function(t,e,n){return null===n.firestore.projects?null:d.a.map(n.firestore.projects,function(t,n){var a=d.a.map(t.users,function(t,e){var n="editor";return d.a.has(t,"permissions")&&t.permissions.publish&&t.permissions.updateDraft&&t.permissions.createJob&&t.permissions.updateSchema&&t.permissions.updateSettings&&t.permissions.updateUsers&&(n="admin"),Object(ce["a"])({},t,{role:n,id:e})});return{draft:t.draft||{},id:n,jsonUrl:"https://firebasestorage.googleapis.com/v0/b/".concat("editlayer-production.appspot.com","/o/").concat(n,"%2Fcontent.json?alt=media&token=").concat(t.token),name:t.name||null,publishedVersion:t.publishedVersion||{},auth:d.a.find(a,{id:e.auth.id})||null,users:a,schema:t.schema||null,settings:t.settings||{},status:t.publishedVersion&&d.a.isEqual(t.draft,t.publishedVersion.draft)&&t.schema===t.publishedVersion.schema?"published":"draft",token:t.token||null}})},activeProject:function(t,e,n){var a=d.a.cloneDeep(e.projects);return d.a.find(a,{id:n.route.params.projectId})||null}},actions:{newProject:function(t,e){t.state;var n=t.dispatch,a=t.getters;e.name=e.name||"Project ".concat(L()("abcdefghijklmnopqrstuvwxyz",4)),e.id=e.id||Ee()(e.name),e.schema=e.schema||{title:"input",description:"textarea",photo:"image"};var i={name:e.name,schema:JSON.stringify(e.schema,"","\t"),users:{},token:L()("abcdefghijklmnopqrstuvwxyz0123456789",24)};i.users[a.auth.id]={email:a.auth.email,userExist:!0,permissions:{updateDraft:!0,updateSchema:!0,updateSettings:!0,updateUsers:!0,publish:!0,createJob:!0}},n("newProjectToFirestore",{newProject:i,payload:e})},deleteProject:function(t,e){var n=t.dispatch;n("deleteProjectFromFirestore",e)},publishJson:function(){var t=Object(Pe["a"])(regeneratorRuntime.mark(function t(e,n){var a,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.state,a=e.commit,i=e.dispatch,a("setPublishProcess",{projectId:n.projectId}),t.next=4,i("newProjectVersionToFirestore",{projectId:n.projectId,publishedBy:n.publishedBy,publishedAt:F["a"].firestoreTimestamp,json:n.json,token:n.token,schema:n.schema,draft:n.draft});case 4:s=t.sent,n.versionId=s.id,a("updatePublishProcess",{projectId:n.projectId,versionId:n.versionId}),i("isPublishReady",n);case 8:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),isPublishReady:function(t,e){var n=t.commit,a=t.getters,i=t.dispatch,s=d.a.find(a.projects,{id:e.projectId});if(s.publishedVersion.versionId===e.versionId){n("updatePublishProcess",{projectId:e.projectId,status:"done"}),!0===e.webhookEnabled&&Object(Se["a"])({configString:e.webhookConfig,email:e.email,json:e.json,versionId:e.versionId});var o={};return!0===e.showLink&&(o.url=e.jsonUrl,o.target=e.projectId,o.text="Open JSON"),n("setNotification",{mode:"success",message:'Project "'.concat(e.projectName,'" is published.'),link:o}),!0}d.a.delay(function(){i("isPublishReady",e)},1e3)},addUserToProject:function(t,e){var n=t.dispatch;e.awaitId="await-".concat(ke["Base64"].encodeURI(e.email)),e.user={email:e.email,userExist:!1,permissions:{publish:!0,updateDraft:!0,updateSchema:!1,updateSettings:!1,updateUsers:!1,createJob:!1}},n("addUserToProjectToFirestore",e)},removeUserFromProject:function(t,e){var n=t.dispatch;n("removeUserFromProjectToFirestore",e)},updatePermission:function(t,e){var n=t.dispatch;n("updatePermissionToFirestore",e)}}},De=n("tWLm"),Te=n("YrCD"),Me=new Te["a"],Ae={actions:{uploadImage:function(){var t=Object(Pe["a"])(regeneratorRuntime.mark(function t(e,n){var a,i,s,o,r,c,u,l,h,m,p,f,v,g;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.commit,i=e.dispatch,d.a.startsWith(n.image.type,"image/")){t.next=3;break}return t.abrupt("return",!1);case 3:if(s=Ee()(n.image.name.replace(/\.[^/.]+$/,"")),o=L()("abcdefghijklmnopqrstuvwxyz",4),r=960,c=960,d.a.isNumber(n.downscale)&&(r=n.downscale,c=n.downscale),d.a.isPlainObject(n.downscale)&&d.a.isNumber(n.downscale.width)&&(r=n.downscale.width),d.a.isPlainObject(n.downscale)&&d.a.isNumber(n.downscale.height)&&(c=n.downscale.height),a("setNotification",{id:"".concat(n.projectId,">").concat(n.path,">upload"),mode:"info",message:s}),u=n.image,!d.a.includes(["image/jpeg","image/png"],n.image.type)){t.next=17;break}return t.next=15,Me.compress(n.image,{quality:.8,convertSize:1e6,maxWidth:r,maxHeight:c}).then(function(t){return t}).catch(function(t){return console.error("Image optimize failed",t.message)});case 15:l=t.sent,u=l;case 17:if(!(u.size>5242880)){t.next=21;break}return a("setNotification",{id:"".concat(n.projectId,">").concat(n.path,">upload"),mode:"danger",message:"Max image size 5 MB, try another image."}),console.error("Max image size 5 MB, try another image."),t.abrupt("return",!1);case 21:if(h="".concat(s,"-").concat(o),"image/jpeg"!==u.type){t.next=26;break}h="".concat(h,".jpg"),t.next=41;break;case 26:if("image/png"!==u.type){t.next=30;break}h="".concat(h,".png"),t.next=41;break;case 30:if("image/gif"!==u.type){t.next=34;break}h="".concat(h,".gif"),t.next=41;break;case 34:if("image/svg+xml"!==u.type){t.next=38;break}h="".concat(h,".svg"),t.next=41;break;case 38:return a("setNotification",{id:"".concat(n.projectId,">").concat(n.path,">upload"),mode:"danger",message:"Unsupported file type. Send jpg, png, gif or svg."}),console.error("Unsupported file type",u.type),t.abrupt("return",!1);case 41:return m=F["a"].storage.ref().child("".concat(n.projectId,"/").concat(h)).put(u),m.on("state_changed",function(t){a("setNotification",{id:"".concat(n.projectId,">").concat(n.path,">upload"),progress:t.bytesTransferred/t.totalBytes*100})}),t.next=45,m.then(function(t){return m.snapshot.ref.getDownloadURL().then(function(t){return t})}).catch(function(t){return console.error("Upload task faild",t)});case 45:if(p=t.sent,f=null,!(n.projectId&&n.path&&p)){t.next=58;break}if(!d.a.includes(["image/jpeg","image/png","image/gif"],n.image.type)){t.next=55;break}return t.next=51,Me.compress(n.image,{quality:.2,convertSize:0,maxWidth:92,maxHeight:92}).catch(function(t){return console.error("Image optimize failed",t.message)});case 51:return v=t.sent,t.next=54,Object(De["a"])(v).catch(function(t){return console.error("Blob to base64 failed",t)});case 54:f=t.sent;case 55:g=new Image,g.src=URL.createObjectURL(u),g.onload=function(){i("updateContent",{projectId:n.projectId,path:n.path,content:{url:p,height:g.height,width:g.width,size:u.size,type:u.type,placeholder:f}})};case 58:return t.abrupt("return",{downloadURL:p,filename:s,projectId:n.projectId,path:n.path,size:u.size,type:u.type,placeholder:f});case 59:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}},Re={state:{activeModal:null,editorContentIsValid:!0,windowHeight:window.innerHeight,windowWidth:window.innerWidth,invalidSchemas:{},editlayerUrl:"https://alpha5.editlayer.org"},mutations:{setEditorContentValid:function(t,e){a["a"].set(t,"editorContentIsValid",e)},setwWindowSize:function(t){a["a"].set(t,"windowWidth",window.innerWidth),a["a"].set(t,"windowHeight",window.innerHeight)},setActiveModal:function(t,e){a["a"].set(t,"activeModal",e)},setInvalidSchema:function(t,e){t.invalidSchemas[e.projectId]=e.schema},removeInvalidSchema:function(t,e){var n=t.invalidSchemas;delete n[e],t.invalidSchemas=n}},actions:{resizeListener:function(t){var e=t.commit;window.addEventListener("resize",d.a.debounce(function(){e("setwWindowSize")},250))}}};a["a"].use(se["a"]);var Be={strict:!0,modules:{firestore:Ce,notifications:xe,projects:Ne,uploader:Ae,utils:Re},getters:{isLoggedIn:function(t){return null===t.firestore.user?null:!(!1===t.firestore.user||!t.firestore.user.email)},auth:function(t){return t.firestore.user},structure:function(t,e){if(!e.activeProject)return{};var n=re()(e.activeProject.schema),a=e.activeProject.draft,i=d.a.has(e.activeProject,"publishedVersion.draft")?e.activeProject.publishedVersion.draft:{};return we(n,a,i)},activeItem:function(t,e,n){if(!e.activeProject)return{};var a=d.a.replace(n.route.params.path,/>/g,".");return d.a.has(e.structure,a)?d.a.get(e.structure,a):{}}},actions:{updateContent:function(t,e){var n=t.getters,a=t.dispatch,i=d.a.get(n.structure,"".concat(e.path,"._content"));d.a.isEqual(i,e.content)||a("updateDraftToFirestore",e)},updateSchema:function(t,e){var n=t.dispatch;n("updateSchemaToFirestore",e)}}},Le=new se["a"].Store(Be),Fe=(n("0sYV"),n("CHRH"));n("hXx5"),n("6Eo3"),n("w2kc"),n("pec5"),n("czgM"),n("+s7A"),n("/zG/"),n("xQLv"),n("o/IV"),n("n3Ef"),n("pW3a"),n("gkaL"),n("Rv4s"),n("ZB6f"),n("Q89w"),n("v6eT"),n("KW50"),n("xSto"),n("r/LT"),n("Cb7E");Fe["a"].register({editlayer:{width:28,height:20,paths:[{d:"m13.8461538 15.8859592 10.8869191-5.238444 2.9592348 1.2250892v1.1380841l-13.8461539 6.433133-13.8461538-6.433133v-1.1380841l2.86214193-1.2250892z"},{d:"m13.8461538 0 13.8461539 6.72571046v1.13808415l-13.8461539 6.43313299-13.8461538-6.43313299v-1.13808415z"}]}}),Fe["a"].register({schema:{width:25,height:23,d:"M3.337 15.132c0-1.597-1.113-2.396-3.337-2.396v-2.46c1.129 0 1.967-.195 2.515-.585.548-.391.822-.986.822-1.784V3.902c0-1.34.453-2.324 1.36-2.955C5.606.316 6.967 0 8.782 0v2.344c-.954.043-1.646.242-2.076.599-.431.356-.646.886-.646 1.59v3.825c0 1.708-.958 2.73-2.873 3.065v.154c1.915.31 2.873 1.327 2.873 3.052v3.85c0 .705.213 1.237.64 1.598.426.36 1.12.55 2.082.566V23c-1.932-.017-3.322-.354-4.171-1.01-.849-.658-1.273-1.72-1.273-3.188v-3.67zm18.502 3.953c0 1.34-.416 2.322-1.248 2.95-.832.626-2.164.948-3.995.965v-2.357c.794-.008 1.413-.174 1.856-.495.443-.322.665-.878.665-1.668v-3.374c0-1.039.222-1.842.665-2.408.443-.567 1.179-.94 2.207-1.12v-.155c-1.915-.335-2.872-1.357-2.872-3.065V4.533c0-.704-.19-1.234-.57-1.59-.381-.357-1.032-.556-1.951-.6V0c1.864 0 3.205.328 4.02.985.815.657 1.223 1.732 1.223 3.226v3.696c0 .859.265 1.468.796 1.829.532.36 1.32.54 2.365.54v2.46c-1.029 0-1.813.183-2.352.548-.54.364-.81.98-.81 1.848v3.953z"}}),a["a"].component("icon",Fe["a"]);var Ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert-core",class:["-mode-"+t.mode,"-size-"+t.size]},[t._t("default")],2)},Ve=[],ze={name:"Alert",props:{mode:{type:String,default:"default"},size:{type:[String],default:"medium"}}},We=ze,qe=(n("kB0m"),Object(P["a"])(We,Ue,Ve,!1,null,"553b0922",null)),Ye=qe.exports,He=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.tag,{tag:"component",staticClass:"button-core",class:["-mode-"+t.mode,"-size-"+t.size,{"-light":t.light},{"-circle":t.circle},{"-active":t.active}],attrs:{href:t.href}},[t._t("default")],2)},Ke=[],Je={name:"Button",props:{mode:{type:String,default:"secondary"},size:{type:String,default:"medium"},light:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},active:{type:Boolean,default:!1},href:{type:[String,Boolean],default:!1}},computed:{tag:function(){return!1===this.href?"button":"a"}}},Qe=Je,Ge=(n("tq2g"),Object(P["a"])(Qe,He,Ke,!1,null,"cce3c71c",null)),Xe=Ge.exports,Ze=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"heading-core",class:["-mode-"+t.mode]},[t._t("default")],2)},tn=[],en={name:"Heading",props:{mode:{type:String,default:"secondary"}}},nn=en,an=(n("uZJW"),Object(P["a"])(nn,Ze,tn,!1,null,"29103608",null)),sn=an.exports,on=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"card-core",class:["-mode-"+t.mode,"-size-"+t.size,{"-link":t.link}]},[t._t("default")],2)},rn=[],cn={name:"Card",props:{mode:{type:String,default:"default"},size:{type:[String],default:"medium"},link:{type:[Boolean],default:!1}}},un=cn,ln=(n("pOlk"),Object(P["a"])(un,on,rn,!1,null,"81bb13cc",null)),dn=ln.exports,hn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("alert-core",{staticClass:"notification",attrs:{mode:t.mode,size:"small"},nativeOn:{mouseover:function(e){return t.mouseover(e)},mouseleave:function(e){return t.mouseleave(e)}}},[n("main",{staticClass:"main"},[n("span",{domProps:{innerHTML:t._s(t.message)}}),n("button-core",{staticClass:"close",attrs:{light:""},nativeOn:{click:function(e){t.close()}}},[n("icon",{attrs:{name:"times"}})],1)],1),t.link?n("button-core",{attrs:{mode:t.mode,size:"small",href:t.link.url,target:t.link.target}},[t._v("\n    "+t._s(t.link.text)+"\n  ")]):t._e(),n("div",{staticClass:"progress",style:{width:t.progressPrecent+"%"}})],1)},mn=[],pn=(n("xfY5"),{name:"Notification",props:{mode:{type:String,default:"default"},message:{type:String,default:"",required:!0},link:{type:[Object,Boolean],default:!1},progress:{type:[Number,Boolean],default:0},id:String,required:!0},data:function(){return{progressPrecent:0,isMouseOver:!1}},watch:{progress:function(t){d.a.isNumber(t)&&(this.progressPrecent=t)}},methods:{runProgress:function(){var t=this;!0!==this.isMouseOver&&!1!==this.progress&&(this.progressPrecent=this.progressPrecent+2),d.a.delay(function(){if(t.progressPrecent>=100)return d.a.delay(function(){t.close()},1e3),null;t.runProgress()},200)},mouseover:function(){this.isMouseOver=!0},mouseleave:function(){this.isMouseOver=!1},close:function(){this.$store.commit("deleteNotification",{id:this.id})}},created:function(){this.runProgress()}}),fn=pn,vn=(n("VYAq"),Object(P["a"])(fn,hn,mn,!1,null,"612898d2",null)),gn=vn.exports;a["a"].component("alert-core",Ye),a["a"].component("button-core",Xe),a["a"].component("heading-core",sn),a["a"].component("card-core",dn),a["a"].component("notification-core",gn);n("QpuV"),n("BEzd");Object(i["sync"])(Le,ie["a"]),new a["a"]({router:ie["a"],store:Le,render:function(t){return t(ae)}}).$mount("#app")},VwXZ:function(t,e,n){"use strict";var a=n("mduB"),i=n.n(a);i.a},WRfe:function(t,e,n){"use strict";var a=n("JJaB"),i=n.n(a);i.a},XqGs:function(t,e,n){"use strict";var a=n("0oxd"),i=n.n(a);i.a},Yy1M:function(t,e,n){"use strict";var a=n("Ic9F"),i=n.n(a);i.a},adgz:function(t,e,n){"use strict";var a=n("Wcq6"),i=n.n(a);n("6nsN"),n("5x/H"),n("WI49");i.a.initializeApp({apiKey:"AIzaSyAqboCJZhpyuqc0lM10ZOPDxD7xPZ7mo7k",authDomain:"editlayer-production.firebaseapp.com",databaseURL:"https://editlayer-production.firebaseio.com",projectId:"editlayer-production",storageBucket:"editlayer-production.appspot.com"});var s=i.a.firestore();s.settings({timestampsInSnapshots:!0}),e["a"]={firestore:s,firestoreDelete:i.a.firestore.FieldValue.delete(),firestoreTimestamp:i.a.firestore.FieldValue.serverTimestamp(),auth:i.a.auth(),storage:i.a.storage()}},cyMu:function(t,e,n){},dEF6:function(t,e,n){"use strict";var a=n("Pxnc"),i=n.n(a);i.a},dPyY:function(t,e,n){},dWsO:function(t,e,n){"use strict";var a=n("H4BI"),i=n.n(a);i.a},dsqT:function(t,e,n){},f4Vg:function(t,e,n){"use strict";var a=n("6dDR"),i=n.n(a);i.a},g7YS:function(t,e,n){},gD9S:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navigation"},[t.$route.params.projectId?[n("PublishButton",{staticClass:"publish-button"}),t.$route.params.projectId?n("router-link",{staticClass:"item",class:{"-active":"Content"===t.$route.name},attrs:{to:{name:"Content",params:{projectId:t.$route.params.projectId,path:t.$route.params.path}}}},[n("icon",{attrs:{name:"regular/edit"}}),n("div",{staticClass:"text"},[t._v("Content")])],1):t._e(),t.$route.params.projectId&&!0===t.permissions.updateSchema?n("router-link",{staticClass:"item",class:{"-active":"Schema"===t.$route.name},attrs:{to:{name:"Schema",params:{projectId:t.$route.params.projectId,path:t.$route.params.path}}}},[n("icon",{attrs:{name:"schema"}}),n("div",{staticClass:"text"},[t._v("Schema")])],1):t._e(),t.$route.params.projectId&&!0===t.permissions.updateSettings?n("router-link",{staticClass:"item",class:{"-active":"Settings"===t.$route.name},attrs:{to:{name:"Settings",params:{projectId:this.$route.params.projectId,path:this.$route.params.path}}}},[n("icon",{attrs:{name:"cogs"}}),n("div",{staticClass:"text"},[t._v("Settings")])],1):t._e(),n("hr"),n("router-link",{staticClass:"item",attrs:{to:{name:"Dashboard"}}},[n("icon",{attrs:{name:"home"}}),n("div",{staticClass:"text"},[t._v("Dashboard")])],1)]:t._e()],2)},i=[],s=n("LvDl"),o=n.n(s),r=n("wi9O"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"publish-button"},["published"===t.publishStatus?n("div",{staticClass:"item -published",attrs:{title:"Publised"}},[n("icon",{attrs:{name:"check"}})],1):t._e(),"publish"===t.publishStatus?n("a",{staticClass:"item -publish",attrs:{title:"Publish"},on:{click:function(e){t.publish()}}},[n("icon",{attrs:{name:"cloud-upload-alt"}}),n("div",{staticClass:"text"},[t._v("\n      Publish\n    ")])],1):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:"publishing"===t.publishStatus,expression:"publishStatus === 'publishing'"}],staticClass:"item -publishing",attrs:{title:"Publishing"}},[n("icon",{attrs:{name:"spinner",spin:""}})],1)])},u=[],l=(n("f3/d"),n("WnLM")),d=n.n(l),h=(n("9VmF"),function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.a.each(e,function(e,a){o.a.has(e,"_content")&&o.a.has(e,"_path")&&o.a.set(n,e._path,e._content),o.a.has(e,"_order")&&o.a.has(e,"_path")&&(o.a.set(n,"".concat(e._path,"._order"),e._order),o.a.set(n,"".concat(e._path,"._key"),a)),o.a.isPlainObject(e)&&t(e,n)}),n}),m=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(o.a.isPlainObject(e)&&o.a.startsWith(o.a.findKey(e),"-")){var i=[];e=o.a.sortBy(e,"_order"),o.a.each(e,function(t,e){t=o.a.omit(t,["_order"]),i.push(t)}),o.a.set(n,a,i)}return o.a.each(e,function(e,i){if(o.a.isPlainObject(e)){var s=a?"".concat(a,".").concat(i):i;t(e,n,s)}}),n},p=function(t){return t=h(t),t=o.a.merge(t,m(t)),t},f={name:"PublishButton",computed:{structure:function(){return this.$store.getters.structure},activeProject:function(){return this.$store.getters.activeProject},isDraft:function(){return!this.activeProject.publishedVersion||(!o.a.isEqual(this.activeProject.draft,this.activeProject.publishedVersion.draft)||this.activeProject.schema!==this.activeProject.publishedVersion.schema)},neverPublished:function(){return null===this.activeProject.publishedVersion},publishProcess:function(){return o.a.has(this.$store.state.projects.processes,this.activeProject.id)?o.a.get(this.$store.state.projects.processes,this.activeProject.id):null},publishStatus:function(){return this.publishProcess&&"publishing"===this.publishProcess.status?"publishing":!0===this.isDraft?"publish":"published"}},methods:{publish:function(){var t=p(this.structure),e=o.a.has(this.$store.getters.activeProject,"settings.webhook.config")?this.$store.getters.activeProject.settings.webhook.config:null,n=o.a.has(this.$store.getters.activeProject,"settings.webhook.enabled")?this.$store.getters.activeProject.settings.webhook.enabled:null;this.$store.dispatch("publishJson",{projectId:this.activeProject.id,projectName:this.activeProject.name,publishedBy:this.$store.getters.auth.id,json:t,token:this.activeProject.token,draft:this.activeProject.draft,schema:this.activeProject.schema,jsonUrl:this.activeProject.jsonUrl,webhookConfig:e,webhookEnabled:n,email:this.$store.getters.auth.email,showLink:this.activeProject.auth.permissions.updateSettings})}},mounted:function(){d()({targets:this.$refs["rotate-icon"],rotate:"360deg",easing:"linear",duration:1e3,loop:!0})}},v=f,g=(n("IFy1"),n("KHd+")),b=Object(g["a"])(v,c,u,!1,null,"63bf3ba6",null),j=b.exports,_={name:"Navigation",components:{Breadcrumb:r["a"],PublishButton:j},computed:{activeProject:function(){return this.$store.getters.activeProject},permissions:function(){return o.a.get(this.activeProject,"auth.permissions")||{}},neverPublished:function(){return!!this.activeProject&&null===this.activeProject.publishedVersion}}},I=_,w=(n("+q1J"),Object(g["a"])(I,a,i,!1,null,"5b0d3cda",null));e["a"]=w.exports},iODC:function(t,e,n){},jcKM:function(t,e,n){},jmMb:function(t,e,n){"use strict";var a=n("5prw"),i=n.n(a);i.a},kB0m:function(t,e,n){"use strict";var a=n("dPyY"),i=n.n(a);i.a},kGHF:function(t,e,n){"use strict";var a=n("K5vO"),i=n.n(a);i.a},lyKL:function(t,e,n){},m2yj:function(t,e,n){"use strict";var a=n("rxGj"),i=n.n(a);i.a},m3uY:function(t,e,n){"use strict";var a=n("BCvz"),i=n.n(a);i.a},mPBz:function(t,e,n){},mduB:function(t,e,n){},n49g:function(t,e,n){},nylU:function(t,e,n){},oxHR:function(t,e,n){},pOlk:function(t,e,n){"use strict";var a=n("+LxF"),i=n.n(a);i.a},rEkR:function(t,e,n){},rGpu:function(t,e,n){},rOZ7:function(t,e,n){"use strict";var a=n("g7YS"),i=n.n(a);i.a},"rsj+":function(t,e,n){"use strict";var a=n("Mgjs"),i=n.n(a);i.a},rxGj:function(t,e,n){},tQNA:function(t,e,n){"use strict";var a=n("D/++"),i=n.n(a);i.a},tq2g:function(t,e,n){"use strict";var a=n("LRkO"),i=n.n(a);i.a},tsck:function(t,e,n){},uZJW:function(t,e,n){"use strict";var a=n("n49g"),i=n.n(a);i.a},vhRK:function(t,e,n){"use strict";var a=n("KPT4"),i=n.n(a);i.a},vwjB:function(t,e,n){"use strict";var a=n("jcKM"),i=n.n(a);i.a},w7fp:function(t,e,n){"use strict";var a=n("Gq+F"),i=n.n(a);i.a},wHRk:function(t,e,n){},wYF4:function(t,e,n){"use strict";var a=n("cyMu"),i=n.n(a);i.a},wi9O:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"breadcrumb"},t._l(t.breadcrumb,function(e,a){return n("div",{key:a,staticClass:"crumb"},[a>0?n("icon",{attrs:{name:"chevron-right"}}):t._e(),a<t.breadcrumb.length-1||t.$store.state.utils.windowWidth<=900?n("button-core",{attrs:{light:""},nativeOn:{click:function(n){t.selectItem(e)}}},[t._v("\n      "+t._s(e.name)+"\n    ")]):n("span",[t._v("\n      "+t._s(e.name)+"\n    ")])],1)}))},i=[],s=(n("pIFo"),n("f3/d"),n("KKXr"),n("LvDl")),o=n.n(s),r=n("WnLM"),c=n.n(r),u={name:"Breadcrumb",computed:{activeProject:function(){return this.$store.getters.activeProject},structure:function(){return this.$store.getters.structure},activeItem:function(t,e){return this.$store.getters.activeItem},breadcrumb:function(){var t=[],e=[];this.$route.params.path&&(e=o.a.split(this.$route.params.path,">")),o.a.has(this.activeItem,"EDITOR")&&(e=o.a.dropRight(e));while(e.length>0){var n=o.a.join(e,"."),a=o.a.get(this.structure,n);a&&!o.a.has(a,"_order")&&t.unshift({name:a.TITLE,path:n,projectId:this.$route.params.projectId}),e=o.a.dropRight(e)}return this.$route.params.projectId&&this.activeProject&&t.unshift({name:this.activeProject.name,projectId:this.$route.params.projectId}),t}},methods:{selectItem:function(t){var e=this,n=o.a.replace(t.path,/\./g,">");c.a.timeline().add({targets:".js-panel",translateX:"100%",opacity:0,easing:"linear",duration:150}).add({targets:".js-panel",translateX:"-100%",duration:0,complete:function(a){t.projectId&&n?e.$router.push({name:e.$route.name,params:{projectId:t.projectId,path:n}}):t.projectId&&e.$router.push({name:e.$route.name,params:{projectId:t.projectId}})}}).add({targets:".js-panel",translateX:0,opacity:1,easing:"linear",duration:150})}}},l=u,d=(n("vhRK"),n("KHd+")),h=Object(d["a"])(l,a,i,!1,null,"3aaf2430",null);e["a"]=h.exports},"yF+Q":function(t,e,n){"use strict";var a=n("rGpu"),i=n.n(a);i.a},yyZs:function(t,e,n){}});
//# sourceMappingURL=app.5f1685ed.js.map